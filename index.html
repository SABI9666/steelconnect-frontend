<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>SteelConnect - Professional Steel & Rebar Design Marketplace</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" defer>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=20260215a">
    <link rel="stylesheet" href="analytics-styles.css?v=20260215a">
    <style>
        /* Base and Original Variables */
        :root {
            --analytics-gradient: linear-gradient(135deg, #4338ca 0%, #7c3aed 100%);
            --production-gradient: linear-gradient(135deg, #a855f7 0%, #f43f5e 100%);
            --sales-gradient: linear-gradient(135deg, #2563eb 0%, #06b6d4 100%);
        }
        
        /* Sidebar and Original Component Styles */
        .sidebar-divider {
            border: none;
            height: 1px;
            background: var(--sidebar-divider, rgba(255,255,255,0.08));
            margin: 8px 16px;
        }
        .sidebar-section-title {
            font-size: 0.65rem;
            font-weight: 600;
            color: rgba(148, 163, 184, 0.6);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 12px 14px 6px 14px;
        }
        .nav-badge {
            background: rgba(245, 158, 11, 0.15);
            color: #fbbf24;
            font-size: 0.55rem;
            padding: 0.15rem 0.4rem;
            border-radius: 4px;
            margin-left: auto;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        /* --- PREMIUM BUSINESS ANALYTICS SECTION --- */
        .business-analytics-section {
            padding: 140px 0;
            background: linear-gradient(180deg, #f8fafc 0%, #eef2ff 15%, #e0e7ff 35%, #c7d2fe 50%, #e0e7ff 65%, #eef2ff 85%, #f8fafc 100%);
            position: relative;
            overflow: hidden;
        }
        .business-analytics-section::before {
            content: '';
            position: absolute;
            inset: 0;
            background:
                radial-gradient(ellipse at 20% 0%, rgba(99, 102, 241, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 100%, rgba(124, 58, 237, 0.06) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(67, 56, 202, 0.04) 0%, transparent 60%);
            z-index: 0;
        }
        .ba-grid-pattern {
            position: absolute;
            inset: 0;
            background-image:
                linear-gradient(rgba(37, 99, 235, 0.04) 1px, transparent 1px),
                linear-gradient(90deg, rgba(37, 99, 235, 0.04) 1px, transparent 1px);
            background-size: 80px 80px;
            mask-image: radial-gradient(ellipse at 50% 50%, black 20%, transparent 70%);
            -webkit-mask-image: radial-gradient(ellipse at 50% 50%, black 20%, transparent 70%);
        }
        .ba-orb { position: absolute; border-radius: 50%; filter: blur(120px); opacity: 0.3; pointer-events: none; }
        .ba-orb-1 { width: 500px; height: 500px; background: rgba(67, 56, 202, 0.12); top: -15%; right: -5%; animation: baOrb1 16s ease-in-out infinite alternate; }
        .ba-orb-2 { width: 400px; height: 400px; background: rgba(124, 58, 237, 0.08); bottom: -10%; left: -5%; animation: baOrb2 14s ease-in-out infinite alternate; }
        .ba-orb-3 { width: 300px; height: 300px; background: rgba(99, 102, 241, 0.06); top: 50%; left: 40%; animation: baOrb3 12s ease-in-out infinite alternate; }
        @keyframes baOrb1 { 0% { transform: translate(0, 0); } 100% { transform: translate(-30px, 40px); } }
        @keyframes baOrb2 { 0% { transform: translate(0, 0); } 100% { transform: translate(40px, -30px); } }
        @keyframes baOrb3 { 0% { transform: scale(1); } 100% { transform: scale(1.3); } }

        .analytics-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 24px;
            position: relative;
            z-index: 1;
        }
        .analytics-header { text-align: center; margin-bottom: 80px; }
        .ba-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 20px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.08), rgba(67, 56, 202, 0.06));
            backdrop-filter: blur(12px);
            border: 1px solid rgba(99, 102, 241, 0.18);
            border-radius: 40px;
            margin-bottom: 24px;
            font-size: 13px;
            font-weight: 600;
            color: #4338ca;
            letter-spacing: 0.5px;
        }
        .ba-badge i { color: #6366f1; }
        .analytics-title {
            font-size: 56px;
            font-weight: 900;
            background: linear-gradient(135deg, #0f172a 0%, #312e81 25%, #4338ca 50%, #6366f1 75%, #818cf8 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 24px;
            line-height: 1.1;
            letter-spacing: -0.02em;
        }
        .analytics-subtitle {
            font-size: 19px;
            color: #64748b;
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.7;
        }

        /* Analytics Metric Cards */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            margin-bottom: 60px;
        }
        @media (max-width: 1024px) { .analytics-grid { grid-template-columns: 1fr; } }
        .analytics-card {
            background: #ffffff;
            border-radius: 20px;
            padding: 32px;
            border: 1px solid #e2e8f0;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
        }
        .analytics-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #4338ca, #6366f1, #818cf8);
            opacity: 0;
            transition: opacity 0.4s ease;
        }
        .analytics-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 20px 50px rgba(99, 102, 241, 0.12), 0 8px 16px rgba(0, 0, 0, 0.04);
            border-color: rgba(99, 102, 241, 0.2);
        }
        .analytics-card:hover::before { opacity: 1; }

        .analytics-card-header {
            display: flex;
            align-items: center;
            margin-bottom: 28px;
            padding-bottom: 20px;
            border-bottom: 1px solid #f1f5f9;
        }
        .analytics-icon {
            width: 52px;
            height: 52px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            color: white;
            margin-right: 16px;
            flex-shrink: 0;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }
        .analytics-icon.purple { background: linear-gradient(135deg, #4338ca, #7c3aed); }
        .analytics-icon.blue { background: linear-gradient(135deg, #2563eb, #06b6d4); }
        .analytics-icon.pink { background: linear-gradient(135deg, #a855f7, #f43f5e); }
        .analytics-card-title { font-size: 20px; font-weight: 700; color: #0f172a; }

        .analytics-metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 0;
        }
        .metric-label { color: #64748b; font-size: 13px; font-weight: 500; }
        .metric-value { font-size: 22px; font-weight: 800; color: #0f172a; }
        .metric-badge {
            display: inline-flex;
            align-items: center;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
            margin-left: 10px;
            letter-spacing: 0.3px;
        }
        .metric-badge.positive { background: rgba(34, 197, 94, 0.1); color: #16a34a; border: 1px solid rgba(34, 197, 94, 0.2); }
        .metric-badge.negative { background: rgba(239, 68, 68, 0.1); color: #dc2626; border: 1px solid rgba(239, 68, 68, 0.2); }

        /* Dashboard Mockup */
        .dashboard-mockup {
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.08), 0 4px 16px rgba(0, 0, 0, 0.04);
            margin-bottom: 60px;
            border: 1px solid #e2e8f0;
        }
        .dashboard-mockup::before {
            display: none;
        }
        .mockup-toolbar {
            background: #f8fafc;
            padding: 14px 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            border-bottom: 1px solid #e2e8f0;
        }
        .mockup-dot { width: 12px; height: 12px; border-radius: 50%; }
        .mockup-dot.red { background: #ef4444; }
        .mockup-dot.yellow { background: #f59e0b; }
        .mockup-dot.green { background: #22c55e; }
        .mockup-url {
            flex: 1;
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 6px 14px;
            font-size: 12px;
            color: #64748b;
            margin-left: 12px;
        }

        .analytics-dashboard-preview {
            background: #ffffff;
            padding: 40px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .dashboard-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; flex-wrap: wrap; gap: 20px; }
        .dashboard-title { font-size: 24px; font-weight: 700; color: #0f172a; }
        .dashboard-actions { display: flex; gap: 12px; }
        .dashboard-btn {
            padding: 10px 20px; border-radius: 10px; font-weight: 600; cursor: pointer;
            transition: all 0.3s ease; border: none; font-size: 13px; letter-spacing: 0.3px;
        }
        .dashboard-btn.primary { background: linear-gradient(135deg, #4338ca, #6366f1); color: white; box-shadow: 0 4px 16px rgba(99, 102, 241, 0.25); }
        .dashboard-btn.primary:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(99, 102, 241, 0.35); }
        .dashboard-btn.secondary { background: #f8fafc; color: #64748b; border: 1px solid #e2e8f0; }
        .dashboard-btn.secondary:hover { background: #f1f5f9; color: #0f172a; transform: translateY(-2px); }

        .chart-container { background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 16px; padding: 30px; margin-bottom: 30px; position: relative; height: 400px; }

        .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-top: 30px; }
        @media (max-width: 768px) { .kpi-grid { grid-template-columns: 1fr 1fr; } }
        .kpi-card {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 16px;
            padding: 24px;
            transition: all 0.3s ease;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.03);
        }
        .kpi-card:hover { background: #ffffff; transform: translateY(-4px); box-shadow: 0 12px 32px rgba(99, 102, 241, 0.1); border-color: rgba(99, 102, 241, 0.2); }
        .kpi-label { color: #64748b; font-size: 11px; text-transform: uppercase; letter-spacing: 1.5px; font-weight: 600; margin-bottom: 10px; }
        .kpi-value {
            font-size: 36px; font-weight: 900; line-height: 1.1;
            background: linear-gradient(135deg, #312e81 0%, #4338ca 40%, #6366f1 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .kpi-trend { display: flex; align-items: center; margin-top: 12px; font-size: 13px; font-weight: 600; }
        .kpi-trend.up { color: #4ade80; }
        .kpi-trend.down { color: #f87171; }
        .kpi-trend i { margin-right: 5px; font-size: 11px; }

        /* Charts Section */
        .charts-showcase-section {
            padding: 100px 0 0 0;
            background: transparent;
            position: relative;
        }
        .charts-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 24px;
            position: relative;
            z-index: 1;
        }
        .charts-header { text-align: center; margin-bottom: 60px; }
        .charts-title {
            font-size: 40px;
            font-weight: 900;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #0f172a 0%, #312e81 40%, #4f46e5 70%, #6366f1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.2;
        }
        .charts-subtitle { font-size: 17px; color: #64748b; max-width: 600px; margin: 0 auto; line-height: 1.7; }
        .charts-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 60px; }
        @media (max-width: 968px) { .charts-grid { grid-template-columns: 1fr; } }
        .chart-card {
            background: #ffffff;
            border-radius: 20px;
            padding: 36px;
            border: 1px solid #e2e8f0;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
        }
        .chart-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #4338ca, #6366f1, #a78bfa);
            opacity: 0;
            transition: opacity 0.4s ease;
        }
        .chart-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 20px 50px rgba(99, 102, 241, 0.12), 0 8px 16px rgba(0, 0, 0, 0.04);
            border-color: rgba(99, 102, 241, 0.2);
        }
        .chart-card:hover::before { opacity: 1; }
        .chart-header { margin-bottom: 24px; }
        .chart-title {
            font-size: 22px; font-weight: 800; color: #0f172a;
            margin-bottom: 8px; display: flex; align-items: center; gap: 14px;
        }
        .chart-icon {
            width: 44px; height: 44px; border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            font-size: 20px; color: white;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }
        .chart-description { color: #64748b; font-size: 14px; line-height: 1.6; }
        .chart-wrapper { position: relative; height: 360px; margin: 24px 0; }
        .chart-stats {
            display: grid; grid-template-columns: repeat(3, 1fr);
            gap: 16px; padding-top: 24px; border-top: 1px solid #f1f5f9;
        }
        .chart-stat { text-align: center; transition: transform 0.3s ease; }
        .chart-stat:hover { transform: scale(1.08); }
        .stat-value {
            font-size: 28px; font-weight: 900;
            background: linear-gradient(135deg, #312e81 0%, #4f46e5 50%, #6366f1 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            display: block; margin-bottom: 4px;
        }
        .stat-label {
            color: #94a3b8; font-size: 12px; font-weight: 600;
            text-transform: uppercase; letter-spacing: 1px;
        }

        /* Metrics Strip */
        .metrics-strip {
            background: linear-gradient(135deg, #312e81 0%, #3730a3 25%, #4338ca 50%, #4f46e5 75%, #6366f1 100%);
            border-radius: 20px;
            padding: 48px;
            color: white;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 40px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 25px 60px rgba(67, 56, 202, 0.25);
        }
        @media (max-width: 768px) { .metrics-strip { grid-template-columns: 1fr 1fr; padding: 32px; } }
        .metrics-strip::after {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.08) 0%, transparent 70%);
            border-radius: 50%;
        }
        .metric-item { text-align: center; position: relative; z-index: 1; }
        .metric-item-value {
            font-size: 44px; font-weight: 900; margin-bottom: 8px;
            color: #ffffff;
            -webkit-text-fill-color: #ffffff;
        }
        .metric-item-label { font-size: 15px; color: rgba(255, 255, 255, 0.8); font-weight: 500; }

        /* Keyframes */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        .pulse-animation { animation: pulse 3s infinite; }
        @keyframes rippleEffect {
            to { transform: scale(4); opacity: 0; }
        }

        /* Mobile overrides for inline analytics styles */
        @media (max-width: 768px) {
            .business-analytics-section { padding: 48px 0; }
            .analytics-header { margin-bottom: 32px; }
            .analytics-title { font-size: 26px; }
            .analytics-subtitle { font-size: 14px; }
            .analytics-grid { gap: 14px; margin-bottom: 28px; }
            .analytics-card { padding: 18px; border-radius: 14px; }
            .kpi-grid { gap: 10px; }
            .kpi-card { padding: 14px; border-radius: 12px; }
            .kpi-value { font-size: 22px; }
            .kpi-label { font-size: 10px; }
            .charts-grid { gap: 14px; }
            .chart-card { padding: 14px; border-radius: 12px; }
            .metrics-strip { border-radius: 14px; }
            .metric-item-value { font-size: 26px; }
            .metric-item-label { font-size: 11px; }
        }
        @media (max-width: 480px) {
            .business-analytics-section { padding: 36px 0; }
            .analytics-title { font-size: 22px; }
            .analytics-card { padding: 14px; border-radius: 12px; }
            .kpi-grid { grid-template-columns: 1fr; }
            .kpi-card { padding: 12px; }
            .metrics-strip { grid-template-columns: 1fr; padding: 20px 14px; }
            .metric-item-value { font-size: 22px; }
        }
    </style>
</head>
<body>
    <div id="notification-container"></div>
    <div id="modal-container"></div>
    <div id="announcement-popup-container"></div>

    <header class="header">
        <div class="header-container">
            <a href="#" class="logo">
                <div class="logo-icon">SC</div>
                SteelConnect
            </a>
            <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle navigation menu">
                <span></span><span></span><span></span>
            </button>
            <button class="portal-menu-btn" id="portalMenuBtn" aria-label="Toggle sidebar menu">
                <i class="fas fa-bars"></i>
            </button>
            <nav id="main-nav-menu" class="nav-menu">
                <a href="#ai-estimation" class="nav-link">AI Estimation</a>
                <a href="#business-analytics" class="nav-link">AI Analytics</a>
                <a href="#how-it-works" class="nav-link">How It Works</a>
                <a href="#why-steelconnect" class="nav-link">Why Choose Us</a>
                <a href="#showcase" class="nav-link">Showcase</a>
            </nav>
            <div class="header-actions">
                <div id="auth-buttons-container" class="auth-buttons">
                    <button id="signin-btn" class="btn btn-outline">Sign In</button>
                    <button id="join-btn" class="btn btn-primary">Join Now</button>
                </div>
                <div id="user-info-container" style="display: none;">
                    <div id="notification-bell-container" class="notification-bell-container">
                        <i class="fas fa-bell notification-bell"></i>
                        <div id="notification-badge" class="notification-badge" style="display: none;"></div>
                        <div id="notification-panel" class="notification-panel">
                            <div class="notification-panel-header">
                                <h3>Notifications</h3>
                                <button id="clear-notifications-btn" class="clear-notifications-btn">Clear All</button>
                            </div>
                            <div id="notification-panel-list" class="notification-panel-list">
                                <div class="notification-empty-state">
                                    <i class="fas fa-bell-slash"></i>
                                    <p>No new notifications</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="user-info" class="user-info-widget">
                        <div id="user-info-avatar" class="user-avatar-small"></div>
                        <span id="user-info-name"></span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div id="user-info-dropdown" class="user-dropdown">
                        <a href="#" id="user-profile-link" class="dropdown-item"><i class="fas fa-user-circle"></i> Profile</a>
                        <a href="#" id="user-settings-link" class="dropdown-item"><i class="fas fa-cog"></i> Settings</a>
                        <a href="#" id="user-logout-link" class="dropdown-item"><i class="fas fa-sign-out-alt"></i> Logout</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div id="landing-page-content">
        <main>
            <section class="hero">
                <div class="hero-background">
                    <div class="hero-bg-slide active" style="background-image: url('https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?q=80&w=2940&auto=format&fit=crop')"></div>
                    <div class="hero-bg-slide" style="background-image: url('https://images.unsplash.com/photo-1504307651254-35680f356dfd?q=80&w=2940&auto=format&fit=crop')"></div>
                    <div class="hero-bg-slide" style="background-image: url('https://images.unsplash.com/photo-1541888946425-d81bb19240f5?q=80&w=2940&auto=format&fit=crop')"></div>
                    <div class="hero-bg-slide" style="background-image: url('https://images.unsplash.com/photo-1503387762-592deb58ef4e?q=80&w=2940&auto=format&fit=crop')"></div>
                    <div class="hero-bg-slide" style="background-image: url('https://images.unsplash.com/photo-1590674899484-d5640e854abe?q=80&w=2940&auto=format&fit=crop')"></div>
                </div>
                <div class="hero-mesh-gradient"></div>
                <div class="hero-particles">
                    <div class="particle"></div><div class="particle"></div><div class="particle"></div><div class="particle"></div>
                    <div class="particle"></div><div class="particle"></div><div class="particle"></div><div class="particle"></div>
                    <div class="particle"></div><div class="particle"></div><div class="particle"></div><div class="particle"></div>
                </div>
                <div class="hero-content">
                    <div class="hero-text">
                        <div class="hero-badge">
                            <span class="hero-badge-dot"></span>
                            <span>The #1 AI-Powered Construction Platform</span>
                        </div>
                        <h1>SteelConnect: The <span class="highlight">Premier Platform</span> with <span class="ai-highlight">AI-Powered Estimation</span> &amp; <span class="analytics-highlight">AI Analytics</span></h1>
                        <p>The future of construction management. Get instant AI cost estimates, unlock predictive analytics dashboards, and collaborate with elite engineers worldwide. One platform for estimation, analytics, and project excellence.</p>
                        <div class="hero-cta">
                            <button id="get-started-btn" class="btn btn-primary">
                                Start Building Today <i class="fas fa-rocket"></i>
                            </button>
                            <a href="#ai-estimation" class="btn btn-ai">
                                Try AI Estimation <i class="fas fa-brain"></i>
                            </a>
                            <a href="#business-analytics" class="btn btn-analytics-hero">
                                AI Analytics <i class="fas fa-chart-line"></i>
                            </a>
                        </div>
                        <div class="hero-stats">
                            <div class="hero-stat">
                                <span class="hero-stat-number">2,500+</span>
                                <span class="hero-stat-label">Professionals</span>
                            </div>
                            <div class="hero-stat">
                                <span class="hero-stat-number">850+</span>
                                <span class="hero-stat-label">Projects</span>
                            </div>
                            <div class="hero-stat">
                                <span class="hero-stat-number">12,000+</span>
                                <span class="hero-stat-label">AI Estimates</span>
                            </div>
                            <div class="hero-stat">
                                <span class="hero-stat-number">50+</span>
                                <span class="hero-stat-label">Countries</span>
                            </div>
                        </div>
                    </div>
                    <div class="hero-visual">
                        <div class="hero-image-container">
                            <div class="hero-image-slider">
                                <img src="https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?q=80&w=2940&auto=format&fit=crop" alt="Modern steel skyscraper architecture" class="hero-slide active">
                                <img src="https://images.unsplash.com/photo-1504307651254-35680f356dfd?q=80&w=2940&auto=format&fit=crop" alt="Construction site with cranes at sunset" class="hero-slide">
                                <img src="https://images.unsplash.com/photo-1541888946425-d81bb19240f5?q=80&w=2940&auto=format&fit=crop" alt="Aerial view of modern construction project" class="hero-slide">
                                <img src="https://images.unsplash.com/photo-1503387762-592deb58ef4e?q=80&w=2940&auto=format&fit=crop" alt="Architectural blueprint and modern building" class="hero-slide">
                                <img src="https://images.unsplash.com/photo-1590674899484-d5640e854abe?q=80&w=2940&auto=format&fit=crop" alt="Steel structure engineering at dusk" class="hero-slide">
                            </div>
                            <div class="hero-slide-progress">
                                <span class="hero-slide-dot active" data-slide="0"></span>
                                <span class="hero-slide-dot" data-slide="1"></span>
                                <span class="hero-slide-dot" data-slide="2"></span>
                                <span class="hero-slide-dot" data-slide="3"></span>
                                <span class="hero-slide-dot" data-slide="4"></span>
                            </div>
                            <div class="hero-image-overlay">
                                <div class="hero-overlay-badge"><i class="fas fa-shield-alt"></i> Enterprise Grade</div>
                                <h3>AI-Driven Construction Intelligence</h3>
                                <p>Estimation, analytics, and collaboration — all in one platform</p>
                            </div>
                        </div>
                        <div class="floating-cards">
                            <div class="floating-card ai-card">
                                <div class="floating-card-icon" style="background: linear-gradient(135deg, #8b5cf6, #6366f1);"><i class="fas fa-brain"></i></div>
                                <h4>AI Estimation</h4>
                                <span class="floating-card-number" style="color: #8b5cf6;">95%+</span>
                                <p>Cost prediction accuracy</p>
                            </div>
                            <div class="floating-card connection-card">
                                <div class="floating-card-icon"><i class="fas fa-chart-pie"></i></div>
                                <h4>AI Analytics</h4>
                                <span class="floating-card-number">Live</span>
                                <p>Predictive business intelligence</p>
                            </div>
                            <div class="floating-card dashboard-card">
                                <div class="floating-card-icon" style="background: linear-gradient(135deg, #10b981, #059669);"><i class="fas fa-tachometer-alt"></i></div>
                                <h4>Smart Dashboard</h4>
                                <span class="floating-card-number" style="color: #10b981;">186%</span>
                                <p>Average ROI boost</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Trusted By Marquee -->
            <section class="trusted-section">
                <p class="trusted-label">Trusted by leading companies worldwide</p>
                <div class="marquee-container">
                    <div class="marquee-track">
                        <div class="marquee-item"><i class="fas fa-building"></i><span>Turner Construction</span></div>
                        <div class="marquee-item"><i class="fas fa-hard-hat"></i><span>Bechtel Group</span></div>
                        <div class="marquee-item"><i class="fas fa-industry"></i><span>AECOM</span></div>
                        <div class="marquee-item"><i class="fas fa-city"></i><span>Skanska</span></div>
                        <div class="marquee-item"><i class="fas fa-drafting-compass"></i><span>WSP Global</span></div>
                        <div class="marquee-item"><i class="fas fa-bridge"></i><span>Fluor Corp</span></div>
                        <div class="marquee-item"><i class="fas fa-landmark"></i><span>Jacobs Engineering</span></div>
                        <div class="marquee-item"><i class="fas fa-warehouse"></i><span>Kiewit Corp</span></div>
                        <!-- Duplicate for seamless loop -->
                        <div class="marquee-item"><i class="fas fa-building"></i><span>Turner Construction</span></div>
                        <div class="marquee-item"><i class="fas fa-hard-hat"></i><span>Bechtel Group</span></div>
                        <div class="marquee-item"><i class="fas fa-industry"></i><span>AECOM</span></div>
                        <div class="marquee-item"><i class="fas fa-city"></i><span>Skanska</span></div>
                        <div class="marquee-item"><i class="fas fa-drafting-compass"></i><span>WSP Global</span></div>
                        <div class="marquee-item"><i class="fas fa-bridge"></i><span>Fluor Corp</span></div>
                        <div class="marquee-item"><i class="fas fa-landmark"></i><span>Jacobs Engineering</span></div>
                        <div class="marquee-item"><i class="fas fa-warehouse"></i><span>Kiewit Corp</span></div>
                    </div>
                </div>
            </section>

            <!-- Animated Features Strip -->
            <div class="features-strip">
                <div class="features-strip-track">
                    <div class="feature-strip-item"><i class="fas fa-brain"></i> AI-Powered Estimation</div>
                    <div class="feature-strip-divider"></div>
                    <div class="feature-strip-item"><i class="fas fa-chart-line"></i> Business Analytics</div>
                    <div class="feature-strip-divider"></div>
                    <div class="feature-strip-item"><i class="fas fa-shield-alt"></i> Secure Platform</div>
                    <div class="feature-strip-divider"></div>
                    <div class="feature-strip-item"><i class="fas fa-globe"></i> Global Network</div>
                    <div class="feature-strip-divider"></div>
                    <div class="feature-strip-item"><i class="fas fa-bolt"></i> Instant Quotes</div>
                    <div class="feature-strip-divider"></div>
                    <div class="feature-strip-item"><i class="fas fa-comments"></i> Real-Time Chat</div>
                    <div class="feature-strip-divider"></div>
                    <div class="feature-strip-item"><i class="fas fa-file-pdf"></i> PDF Analysis</div>
                    <div class="feature-strip-divider"></div>
                    <div class="feature-strip-item"><i class="fas fa-award"></i> Verified Professionals</div>
                    <div class="feature-strip-divider"></div>
                    <!-- Duplicate for seamless loop -->
                    <div class="feature-strip-item"><i class="fas fa-brain"></i> AI-Powered Estimation</div>
                    <div class="feature-strip-divider"></div>
                    <div class="feature-strip-item"><i class="fas fa-chart-line"></i> Business Analytics</div>
                    <div class="feature-strip-divider"></div>
                    <div class="feature-strip-item"><i class="fas fa-shield-alt"></i> Secure Platform</div>
                    <div class="feature-strip-divider"></div>
                    <div class="feature-strip-item"><i class="fas fa-globe"></i> Global Network</div>
                    <div class="feature-strip-divider"></div>
                    <div class="feature-strip-item"><i class="fas fa-bolt"></i> Instant Quotes</div>
                    <div class="feature-strip-divider"></div>
                    <div class="feature-strip-item"><i class="fas fa-comments"></i> Real-Time Chat</div>
                    <div class="feature-strip-divider"></div>
                    <div class="feature-strip-item"><i class="fas fa-file-pdf"></i> PDF Analysis</div>
                    <div class="feature-strip-divider"></div>
                    <div class="feature-strip-item"><i class="fas fa-award"></i> Verified Professionals</div>
                    <div class="feature-strip-divider"></div>
                </div>
            </div>

            <!-- ========== DEMO VIDEO / 3-STATE ARCHITECTURE ========== -->
            <section class="demo-section" id="videoShowcase">
                <!-- Ambient background glows -->
                <div class="demo-glow demo-glow-1"></div>
                <div class="demo-glow demo-glow-2"></div>

                <div class="demo-container">
                    <!-- Header -->
                    <div class="demo-header">
                        <div class="demo-badge"><span class="demo-badge-dot"></span> PLATFORM PREVIEW</div>
                        <h2 class="demo-title">See SteelConnect in Action</h2>
                        <p class="demo-subtitle">AI Estimation &middot; PDF Drawing Analysis &middot; Project Marketplace &middot; Real-Time Messaging &middot; Community Hub &middot; Analytics Dashboard &middot; Project Tracking &middot; Quote Management</p>
                    </div>

                    <!-- Theater: player + side stats -->
                    <div class="demo-theater">
                        <div class="demo-player" id="demoPlayer">

                            <!-- ===== STATE 1: POSTER + PLAY BUTTON ===== -->
                            <div class="demo-state demo-state-play" id="demoStatePlay" style="display:flex">
                                <img class="demo-poster" src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=1920&q=90" alt="SteelConnect Platform Preview">
                                <div class="demo-poster-overlay"></div>
                                <div class="demo-play-center" onclick="demoPlay()">
                                    <div class="demo-play-ripple"></div>
                                    <div class="demo-play-ripple demo-ripple-2"></div>
                                    <div class="demo-play-circle" id="demoPlayCircle">
                                        <i class="fas fa-play"></i>
                                    </div>
                                </div>
                                <div class="demo-play-info">
                                    <span class="demo-play-label">Watch Platform Demo</span>
                                    <span class="demo-play-time"><i class="fas fa-clock"></i> 3:24 Full Preview</span>
                                </div>
                                <div class="demo-chapter-pills">
                                    <div class="demo-pill"><i class="fas fa-brain"></i> AI Estimation</div>
                                    <div class="demo-pill"><i class="fas fa-file-pdf"></i> PDF Analysis</div>
                                    <div class="demo-pill"><i class="fas fa-briefcase"></i> Project Hub</div>
                                    <div class="demo-pill"><i class="fas fa-comments"></i> Messaging</div>
                                    <div class="demo-pill"><i class="fas fa-users"></i> Community</div>
                                    <div class="demo-pill"><i class="fas fa-chart-bar"></i> Analytics</div>
                                </div>
                            </div>

                            <!-- ===== STATE 2: SLIDESHOW + AI HUD ===== -->
                            <div class="demo-state demo-state-slides" id="demoStateSlides" style="display:none">
                                <!-- Slides -->
                                <div class="demo-slides" id="demoSlides">
                                    <div class="demo-slide demo-slide-active" style="background-image:url('https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=1920&q=90')"></div>
                                    <div class="demo-slide" style="background-image:url('https://images.unsplash.com/photo-1677442136019-21780ecad995?w=1920&q=90')"></div>
                                    <div class="demo-slide" style="background-image:url('https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?w=1920&q=90')"></div>
                                    <div class="demo-slide" style="background-image:url('https://images.unsplash.com/photo-1552664730-d307ca884978?w=1920&q=90')"></div>
                                    <div class="demo-slide" style="background-image:url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=1920&q=90')"></div>
                                    <div class="demo-slide" style="background-image:url('https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=1920&q=90')"></div>
                                    <div class="demo-slide" style="background-image:url('https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=1920&q=90')"></div>
                                    <div class="demo-slide" style="background-image:url('https://images.unsplash.com/photo-1507925921958-8a62f3d1a50d?w=1920&q=90')"></div>
                                </div>
                                <!-- CAPTION BAR — separate overlay, highest z-index, always on top -->
                                <div class="demo-caption-bar" id="demoCaptionBar">
                                    <div class="demo-caption-num" id="demoCaptionNum">1 / 8</div>
                                    <span class="demo-caption-tag" id="demoCaptionTag"><i class="fas fa-tachometer-alt"></i> Smart Dashboard</span>
                                    <span class="demo-caption-text" id="demoCaptionText">Personalized dashboard — real-time activity, notifications &amp; quick actions</span>
                                </div>
                                <!-- AI HUD overlay -->
                                <div class="demo-ai-hud">
                                    <div class="demo-ai-lines">
                                        <div class="demo-ai-line"><span class="demo-ai-dot demo-dot-green"></span> Loading dashboard modules...</div>
                                        <div class="demo-ai-line"><span class="demo-ai-dot demo-dot-blue"></span> Scanning uploaded PDF drawings...</div>
                                        <div class="demo-ai-line"><span class="demo-ai-dot demo-dot-purple"></span> AI generating cost estimates...</div>
                                        <div class="demo-ai-line"><span class="demo-ai-dot demo-dot-amber"></span> Matching verified designers...</div>
                                    </div>
                                    <div class="demo-ai-counters">
                                        <div class="demo-counter-card"><span class="demo-counter-val" id="demoCountProjects">0</span><span class="demo-counter-label">Active Projects</span></div>
                                        <div class="demo-counter-card"><span class="demo-counter-val" id="demoCountDesigners">0</span><span class="demo-counter-label">Verified Designers</span></div>
                                        <div class="demo-counter-card"><span class="demo-counter-val" id="demoCountEstimates">0</span><span class="demo-counter-label">AI Estimates</span></div>
                                    </div>
                                </div>
                                <!-- Progress bar -->
                                <div class="demo-progress">
                                    <div class="demo-progress-track">
                                        <div class="demo-progress-fill" id="demoProgressFill"></div>
                                        <div class="demo-progress-gate-dot" title="Preview ends here"></div>
                                    </div>
                                </div>
                                <!-- Controls: mute + fullscreen -->
                                <div class="demo-controls">
                                    <button class="demo-ctrl-btn" id="demoMuteBtn" onclick="demoToggleMute()" title="Mute/Unmute"><i class="fas fa-volume-up"></i></button>
                                    <button class="demo-ctrl-btn" onclick="demoToggleFS()" title="Fullscreen"><i class="fas fa-expand"></i></button>
                                </div>
                            </div>

                            <!-- ===== STATE 3: EMAIL GATE ===== -->
                            <div class="demo-state demo-state-gate" id="demoStateGate" style="display:none">
                                <img class="demo-gate-bg" src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=1920&q=90" alt="">
                                <div class="demo-gate-overlay"></div>
                                <div class="demo-gate-content">
                                    <div class="demo-gate-icon"><i class="fas fa-lock"></i></div>
                                    <h3 class="demo-gate-title">Unlock the Full Platform Tour</h3>
                                    <p class="demo-gate-desc">See how SteelConnect's AI estimation, project marketplace, real-time messaging &amp; community features work together</p>
                                    <div class="demo-gate-chips">
                                        <div class="demo-gate-chip"><i class="fas fa-briefcase"></i><span>Project Marketplace</span></div>
                                        <div class="demo-gate-chip"><i class="fas fa-comments"></i><span>Real-Time Chat</span></div>
                                        <div class="demo-gate-chip"><i class="fas fa-users"></i><span>Community Hub</span></div>
                                        <div class="demo-gate-chip"><i class="fas fa-chart-bar"></i><span>Analytics Dashboard</span></div>
                                    </div>
                                    <form class="demo-gate-form" id="demoGateForm" onsubmit="return demoUnlock(event)">
                                        <div class="demo-gate-input-row">
                                            <input type="email" class="demo-gate-email" id="demoGateEmail" placeholder="Enter your work email" required>
                                            <button type="submit" class="demo-gate-btn" id="demoGateBtn">
                                                <span class="demo-gate-btn-text"><i class="fas fa-play"></i> Continue Watching</span>
                                                <span class="demo-gate-btn-loading" style="display:none"><i class="fas fa-spinner fa-spin"></i></span>
                                            </button>
                                        </div>
                                    </form>
                                    <p class="demo-gate-trust"><i class="fas fa-shield-alt"></i> Free forever &middot; No credit card &middot; 10,000+ joined</p>
                                </div>
                            </div>

                        </div>

                        <!-- Side stats panel -->
                        <div class="demo-side-panel">
                            <div class="demo-stat-card demo-stat-highlight">
                                <div class="demo-stat-icon"><i class="fas fa-robot"></i></div>
                                <div class="demo-stat-num">10,400+</div>
                                <div class="demo-stat-label">AI Estimates Generated</div>
                            </div>
                            <div class="demo-stat-card">
                                <div class="demo-stat-icon"><i class="fas fa-user-check"></i></div>
                                <div class="demo-stat-num">520+</div>
                                <div class="demo-stat-label">Verified Designers</div>
                            </div>
                            <div class="demo-stat-card">
                                <div class="demo-stat-icon"><i class="fas fa-file-pdf"></i></div>
                                <div class="demo-stat-num">20+</div>
                                <div class="demo-stat-label">File Types Supported</div>
                            </div>
                            <div class="demo-stat-card">
                                <div class="demo-stat-icon"><i class="fas fa-bolt"></i></div>
                                <div class="demo-stat-num">&lt; 60s</div>
                                <div class="demo-stat-label">To Get AI Estimate</div>
                            </div>
                        </div>
                    </div>
                </div>

            </section>

            <section id="ai-estimation" class="ai-estimation">
                <div class="ai-est-orb ai-est-orb-1"></div>
                <div class="ai-est-orb ai-est-orb-2"></div>
                <div class="ai-est-orb ai-est-orb-3"></div>
                <div class="ai-est-grid-bg"></div>
                <div class="ai-section-container">
                    <div class="ai-est-header reveal">
                        <span class="ai-est-badge"><i class="fas fa-sparkles"></i> AI-Powered Technology</span>
                        <h2 class="ai-section-title">AI-Powered Estimation</h2>
                        <p class="ai-section-subtitle">Get instant, accurate cost estimates for your construction projects by providing a few key details. Our AI analyzes the data to give you a preliminary budget and timeline.</p>
                    </div>

                    <div class="ai-content">
                        <div class="ai-features-left">
                            <div class="ai-feature-card reveal reveal-delay-1">
                                <div class="ai-feature-icon-wrap">
                                    <div class="ai-feature-icon"><i class="fas fa-bolt"></i></div>
                                    <div class="ai-feature-icon-glow"></div>
                                </div>
                                <div class="ai-feature-info">
                                    <h3>Instant Analysis</h3>
                                    <p>Our AI provides preliminary cost and timeline estimates in seconds, helping you make quicker decisions.</p>
                                </div>
                            </div>
                            <div class="ai-feature-card reveal reveal-delay-2">
                                <div class="ai-feature-icon-wrap">
                                    <div class="ai-feature-icon ai-feature-icon-cyan"><i class="fas fa-file-upload"></i></div>
                                    <div class="ai-feature-icon-glow ai-feature-glow-cyan"></div>
                                </div>
                                <div class="ai-feature-info">
                                    <h3>PDF Uploads for Pros</h3>
                                    <p>Registered users can upload structural drawings directly for a more detailed and accurate AI-powered cost breakdown.</p>
                                </div>
                            </div>
                            <div class="ai-feature-card reveal reveal-delay-3">
                                <div class="ai-feature-icon-wrap">
                                    <div class="ai-feature-icon ai-feature-icon-emerald"><i class="fas fa-chart-bar"></i></div>
                                    <div class="ai-feature-icon-glow ai-feature-glow-emerald"></div>
                                </div>
                                <div class="ai-feature-info">
                                    <h3>Smart Breakdown</h3>
                                    <p>Get detailed material, labor, and timeline breakdowns powered by machine learning models trained on thousands of projects.</p>
                                </div>
                            </div>
                            <div class="ai-est-trust-strip">
                                <div class="ai-est-trust-item">
                                    <span class="ai-est-trust-number">95%+</span>
                                    <span class="ai-est-trust-label">Accuracy</span>
                                </div>
                                <div class="ai-est-trust-divider"></div>
                                <div class="ai-est-trust-item">
                                    <span class="ai-est-trust-number">12K+</span>
                                    <span class="ai-est-trust-label">Estimates</span>
                                </div>
                                <div class="ai-est-trust-divider"></div>
                                <div class="ai-est-trust-item">
                                    <span class="ai-est-trust-number">&lt;3s</span>
                                    <span class="ai-est-trust-label">Results</span>
                                </div>
                            </div>
                        </div>

                        <div class="ai-demo reveal reveal-delay-2">
                            <div class="ai-demo-header">
                                <div class="ai-demo-icon"><i class="fas fa-calculator"></i></div>
                                <div>
                                    <div class="ai-demo-title">Quick Project Estimator</div>
                                    <div class="ai-demo-subtitle">Powered by AI</div>
                                </div>
                                <div class="ai-demo-live-badge"><span class="ai-demo-live-dot"></span> Live</div>
                            </div>

                            <div class="ai-input-group">
                                <label><i class="fas fa-building"></i> Project Type</label>
                                <select id="preview-project-type" class="ai-input">
                                    <option value="">Select project type</option>
                                    <option value="residential">Residential Building</option>
                                    <option value="commercial">Commercial Complex</option>
                                    <option value="industrial">Industrial Facility</option>
                                </select>
                            </div>

                            <div class="ai-input-group">
                                <label><i class="fas fa-weight-hanging"></i> Estimated Material Tonnage (tons)</label>
                                <input type="number" id="preview-steel-tonnage" class="ai-input" placeholder="e.g., 150" min="1">
                            </div>

                            <button class="ai-estimate-btn" id="preview-generate-btn">
                                <span class="ai-estimate-btn-content"><i class="fas fa-brain"></i> Generate AI Preview</span>
                                <span class="ai-estimate-btn-shine"></span>
                            </button>

                            <div id="preview-ai-result" class="ai-result">
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px;">
                                    <i class="fas fa-check-circle" style="color: #8b5cf6;"></i>
                                    <h4 style="color: #1e293b; font-weight: 700;">AI Analysis Complete</h4>
                                </div>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                                    <div class="ai-result-stat">
                                        <span id="preview-estimated-cost" class="ai-result-number">$0</span>
                                        <span class="ai-result-label">Estimated Cost</span>
                                    </div>
                                    <div class="ai-result-stat">
                                        <span id="preview-timeline-estimate" class="ai-result-number">0 weeks</span>
                                        <span class="ai-result-label">Timeline</span>
                                    </div>
                                </div>
                                <p style="font-size: 12px; color: var(--text-gray); margin-top: 16px; text-align: center;">
                                    *This is a preview. <a href="#" id="signup-link" style="color: #8b5cf6; font-weight: 600;">Sign up</a> for the full tool with PDF uploads.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- AI Features Showcase Carousel -->
            <section class="ai-features-section">
                <div class="animated-blob blob-1"></div>
                <div class="animated-blob blob-2"></div>
                <div class="animated-blob blob-3"></div>
                <div class="ai-features-container">
                    <div style="text-align: center; margin-bottom: 60px;">
                        <h2 class="analytics-title reveal" style="font-size: 48px;">Powered by Artificial Intelligence</h2>
                        <p class="analytics-subtitle reveal reveal-delay-1">Experience the future of construction management with our AI-driven tools</p>
                    </div>
                    <div class="ai-features-carousel" id="ai-features-carousel">
                        <div class="ai-features-track" id="ai-features-track">
                            <!-- Slide 1: AI Estimation -->
                            <div class="ai-feature-slide">
                                <div class="ai-feature-content">
                                    <div class="ai-feature-badge purple"><i class="fas fa-brain"></i> AI Estimation</div>
                                    <h3 class="ai-feature-title">Instant AI-Powered Cost Estimation</h3>
                                    <p class="ai-feature-description">Upload your structural drawings or enter project details and get accurate cost estimates in seconds. Our machine learning models are trained on thousands of real projects.</p>
                                    <div class="ai-feature-highlights">
                                        <div class="ai-feature-highlight"><i class="fas fa-check"></i> 95%+ accuracy on cost predictions</div>
                                        <div class="ai-feature-highlight"><i class="fas fa-check"></i> PDF drawing analysis &amp; extraction</div>
                                        <div class="ai-feature-highlight"><i class="fas fa-check"></i> Material quantity auto-calculation</div>
                                        <div class="ai-feature-highlight"><i class="fas fa-check"></i> Timeline &amp; milestone forecasting</div>
                                    </div>
                                </div>
                                <div class="ai-feature-visual">
                                    <i class="fas fa-calculator ai-visual-icon"></i>
                                    <div class="ai-visual-stats">
                                        <div class="ai-visual-stat"><span class="ai-visual-stat-value">$2.4B</span><span class="ai-visual-stat-label">Estimated Value</span></div>
                                        <div class="ai-visual-stat"><span class="ai-visual-stat-value">12K+</span><span class="ai-visual-stat-label">Estimates Made</span></div>
                                    </div>
                                </div>
                            </div>
                            <!-- Slide 2: AI Analytics -->
                            <div class="ai-feature-slide">
                                <div class="ai-feature-content">
                                    <div class="ai-feature-badge blue"><i class="fas fa-chart-pie"></i> AI Analytics</div>
                                    <h3 class="ai-feature-title">Intelligent Business Analytics</h3>
                                    <p class="ai-feature-description">Gain deep insights into your project portfolio with AI-driven analytics. Predict trends, identify bottlenecks, and optimize your operations with smart dashboards.</p>
                                    <div class="ai-feature-highlights">
                                        <div class="ai-feature-highlight"><i class="fas fa-check"></i> Predictive revenue forecasting</div>
                                        <div class="ai-feature-highlight"><i class="fas fa-check"></i> Smart resource allocation suggestions</div>
                                        <div class="ai-feature-highlight"><i class="fas fa-check"></i> Real-time KPI monitoring</div>
                                        <div class="ai-feature-highlight"><i class="fas fa-check"></i> Automated performance reports</div>
                                    </div>
                                </div>
                                <div class="ai-feature-visual blue-gradient">
                                    <i class="fas fa-chart-line ai-visual-icon"></i>
                                    <div class="ai-visual-stats">
                                        <div class="ai-visual-stat"><span class="ai-visual-stat-value">186%</span><span class="ai-visual-stat-label">Avg. ROI Boost</span></div>
                                        <div class="ai-visual-stat"><span class="ai-visual-stat-value">40%</span><span class="ai-visual-stat-label">Time Saved</span></div>
                                    </div>
                                </div>
                            </div>
                            <!-- Slide 3: Business Dashboard -->
                            <div class="ai-feature-slide">
                                <div class="ai-feature-content">
                                    <div class="ai-feature-badge gold"><i class="fas fa-tachometer-alt"></i> Dashboard</div>
                                    <h3 class="ai-feature-title">World-Class Business Dashboard</h3>
                                    <p class="ai-feature-description">Monitor every aspect of your construction business from a single command center. Beautiful visualizations, exportable reports, and team collaboration tools.</p>
                                    <div class="ai-feature-highlights">
                                        <div class="ai-feature-highlight"><i class="fas fa-check"></i> Interactive charts &amp; visualizations</div>
                                        <div class="ai-feature-highlight"><i class="fas fa-check"></i> One-click PDF/Excel report export</div>
                                        <div class="ai-feature-highlight"><i class="fas fa-check"></i> Team performance scorecards</div>
                                        <div class="ai-feature-highlight"><i class="fas fa-check"></i> Custom KPI dashboards</div>
                                    </div>
                                </div>
                                <div class="ai-feature-visual gold-gradient">
                                    <i class="fas fa-th-large ai-visual-icon"></i>
                                    <div class="ai-visual-stats">
                                        <div class="ai-visual-stat"><span class="ai-visual-stat-value">98.5%</span><span class="ai-visual-stat-label">Completion Rate</span></div>
                                        <div class="ai-visual-stat"><span class="ai-visual-stat-value">$1.8M</span><span class="ai-visual-stat-label">Monthly Revenue</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ai-features-nav" id="ai-features-nav">
                        <button class="ai-feature-dot active" onclick="goToAIFeature(0)"></button>
                        <button class="ai-feature-dot" onclick="goToAIFeature(1)"></button>
                        <button class="ai-feature-dot" onclick="goToAIFeature(2)"></button>
                    </div>
                </div>
            </section>

            <section id="business-analytics" class="business-analytics-section">
                <div class="ba-orb ba-orb-1"></div>
                <div class="ba-orb ba-orb-2"></div>
                <div class="ba-orb ba-orb-3"></div>
                <div class="ba-grid-pattern"></div>
                <div class="analytics-container">
                    <div class="analytics-header">
                        <span class="ba-badge reveal"><i class="fas fa-chart-line"></i> Real-Time Analytics</span>
                        <h2 class="analytics-title reveal">Business Analytics Dashboard</h2>
                        <p class="analytics-subtitle reveal reveal-delay-1">
                            Gain powerful insights into your projects, performance metrics, and business growth with our comprehensive analytics suite.
                        </p>
                    </div>
                    <div class="analytics-grid">
                        <div class="analytics-card tilt-card reveal-left">
                            <div class="analytics-card-header">
                                <div class="analytics-icon purple"><i class="fas fa-chart-line"></i></div>
                                <h3 class="analytics-card-title">Performance Metrics</h3>
                            </div>
                            <div class="analytics-metric">
                                <span class="metric-label">Completion Rate</span>
                                <div><span class="metric-value">98.5%</span><span class="metric-badge positive">+2.3%</span></div>
                            </div>
                            <div class="metric-progress"><div class="metric-progress-bar purple" style="--progress: 98.5%"></div></div>
                            <div class="analytics-metric">
                                <span class="metric-label">Avg. Project Value</span>
                                <div><span class="metric-value">$284K</span><span class="metric-badge positive">+15%</span></div>
                            </div>
                            <div class="metric-progress"><div class="metric-progress-bar purple" style="--progress: 75%"></div></div>
                            <div class="analytics-metric">
                                <span class="metric-label">Client Satisfaction</span>
                                <div><span class="metric-value">4.9/5</span><span class="metric-badge positive">+0.2</span></div>
                            </div>
                            <div class="metric-progress"><div class="metric-progress-bar purple" style="--progress: 98%"></div></div>
                        </div>
                        <div class="analytics-card tilt-card reveal-right" style="transition-delay: 0.15s;">
                            <div class="analytics-card-header">
                                <div class="analytics-icon blue"><i class="fas fa-users"></i></div>
                                <h3 class="analytics-card-title">Team Analytics</h3>
                            </div>
                            <div class="analytics-metric">
                                <span class="metric-label">Active Professionals</span>
                                <div><span class="metric-value">2,547</span><span class="metric-badge positive">+124</span></div>
                            </div>
                            <div class="metric-progress"><div class="metric-progress-bar blue" style="--progress: 85%"></div></div>
                            <div class="analytics-metric">
                                <span class="metric-label">Utilization Rate</span>
                                <div><span class="metric-value">87%</span><span class="metric-badge positive">+5%</span></div>
                            </div>
                            <div class="metric-progress"><div class="metric-progress-bar blue" style="--progress: 87%"></div></div>
                            <div class="analytics-metric">
                                <span class="metric-label">Response Time</span>
                                <div><span class="metric-value">2.4h</span><span class="metric-badge positive">-0.6h</span></div>
                            </div>
                            <div class="metric-progress"><div class="metric-progress-bar blue" style="--progress: 76%"></div></div>
                        </div>
                        <div class="analytics-card tilt-card reveal-left" style="transition-delay: 0.3s;">
                            <div class="analytics-card-header">
                                <div class="analytics-icon pink"><i class="fas fa-dollar-sign"></i></div>
                                <h3 class="analytics-card-title">Financial Overview</h3>
                            </div>
                            <div class="analytics-metric">
                                <span class="metric-label">Monthly Revenue</span>
                                <div><span class="metric-value">$1.8M</span><span class="metric-badge positive">+22%</span></div>
                            </div>
                            <div class="metric-progress"><div class="metric-progress-bar pink" style="--progress: 82%"></div></div>
                            <div class="analytics-metric">
                                <span class="metric-label">Profit Margin</span>
                                <div><span class="metric-value">34%</span><span class="metric-badge positive">+3%</span></div>
                            </div>
                            <div class="metric-progress"><div class="metric-progress-bar pink" style="--progress: 34%"></div></div>
                            <div class="analytics-metric">
                                <span class="metric-label">ROI</span>
                                <div><span class="metric-value">186%</span><span class="metric-badge positive">+28%</span></div>
                            </div>
                            <div class="metric-progress"><div class="metric-progress-bar pink" style="--progress: 93%"></div></div>
                        </div>
                    </div>
                    <div class="dashboard-mockup reveal-scale">
                        <div class="mockup-toolbar">
                            <div class="mockup-dot red"></div>
                            <div class="mockup-dot yellow"></div>
                            <div class="mockup-dot green"></div>
                            <div class="mockup-url">steelconnect.app/dashboard/analytics</div>
                        </div>
                        <div class="analytics-dashboard-preview">
                            <div class="dashboard-header">
                                <h3 class="dashboard-title">Real-Time Dashboard Preview</h3>
                                <div class="dashboard-actions">
                                    <button class="dashboard-btn secondary"><i class="fas fa-download"></i> Export Report</button>
                                    <button class="dashboard-btn primary"><i class="fas fa-expand"></i> View Full Dashboard</button>
                                </div>
                            </div>
                            <div class="chart-container"><canvas id="analytics-chart"></canvas></div>
                            <div class="kpi-grid">
                                <div class="kpi-card tilt-card">
                                    <div class="kpi-label">Total Projects</div><div class="kpi-value">1,284</div>
                                    <div class="kpi-trend up"><i class="fas fa-arrow-up"></i> 12% from last month</div>
                                </div>
                                <div class="kpi-card tilt-card">
                                    <div class="kpi-label">Active Users</div><div class="kpi-value">8.4K</div>
                                    <div class="kpi-trend up"><i class="fas fa-arrow-up"></i> 23% increase</div>
                                </div>
                                <div class="kpi-card tilt-card">
                                    <div class="kpi-label">Avg. Deal Size</div><div class="kpi-value">$125K</div>
                                    <div class="kpi-trend up"><i class="fas fa-arrow-up"></i> 8% growth</div>
                                </div>
                                <div class="kpi-card tilt-card">
                                    <div class="kpi-label">Success Rate</div><div class="kpi-value">94.2%</div>
                                    <div class="kpi-trend up"><i class="fas fa-arrow-up"></i> 3.5% improvement</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="charts-showcase-section">
                    <div class="charts-container">
                    <div class="charts-header">
                        <h2 class="charts-title reveal">Visualize Your Success</h2>
                        <p class="charts-subtitle reveal reveal-delay-1">Interactive analytics that transform your data into actionable insights.</p>
                    </div>
                    <div class="charts-grid">
                        <div class="chart-card tilt-card reveal-left">
                            <div class="chart-header">
                                <div class="chart-title">
                                    <div class="chart-icon" style="background: linear-gradient(135deg, #a855f7 0%, #f43f5e 100%);"><i class="fas fa-chart-pie"></i></div>
                                    Market Distribution
                                </div>
                                <p class="chart-description">Real-time breakdown of project categories and market segments.</p>
                            </div>
                            <div class="chart-wrapper"><canvas id="attractive-pie-chart"></canvas></div>
                            <div class="chart-stats">
                                <div class="chart-stat"><span class="stat-value">42%</span><span class="stat-label">Growth</span></div>
                                <div class="chart-stat"><span class="stat-value">8.5K</span><span class="stat-label">Projects</span></div>
                                <div class="chart-stat"><span class="stat-value">$2.8M</span><span class="stat-label">Revenue</span></div>
                            </div>
                        </div>
                        <div class="chart-card tilt-card reveal-right">
                            <div class="chart-header">
                                <div class="chart-title">
                                    <div class="chart-icon" style="background: linear-gradient(135deg, #4338ca 0%, #06b6d4 100%);"><i class="fas fa-chart-bar"></i></div>
                                    Performance Trends
                                </div>
                                <p class="chart-description">Monthly performance metrics and growth trajectory analysis.</p>
                            </div>
                            <div class="chart-wrapper"><canvas id="attractive-bar-chart"></canvas></div>
                            <div class="chart-stats">
                                <div class="chart-stat"><span class="stat-value">186%</span><span class="stat-label">ROI</span></div>
                                <div class="chart-stat"><span class="stat-value">94.2%</span><span class="stat-label">Success</span></div>
                                <div class="chart-stat"><span class="stat-value">4.9★</span><span class="stat-label">Rating</span></div>
                            </div>
                        </div>
                    </div>
                    <div class="metrics-strip">
                        <div class="metric-item pulse-animation"><div class="metric-item-value">250K+</div><div class="metric-item-label">Active Users</div></div>
                        <div class="metric-item"><div class="metric-item-value">99.8%</div><div class="metric-item-label">Uptime</div></div>
                        <div class="metric-item"><div class="metric-item-value">50+</div><div class="metric-item-label">Countries</div></div>
                        <div class="metric-item"><div class="metric-item-value">24/7</div><div class="metric-item-label">Support</div></div>
                    </div>
                    </div>
                    </div>
                </div>
            </section>

            <section id="how-it-works" class="how-it-works">
                <div class="hiw-orb hiw-orb-1"></div>
                <div class="hiw-orb hiw-orb-2"></div>
                <div class="hiw-grid-bg"></div>
                <div class="section-container">
                    <span class="hiw-badge reveal"><i class="fas fa-layer-group"></i> Platform Overview</span>
                    <h2 class="section-title reveal">How SteelConnect Works</h2>
                    <p class="section-subtitle reveal reveal-delay-1">From project creation to final delivery — a seamless, AI-powered workflow designed for construction professionals worldwide.</p>

                    <!-- Step Timeline -->
                    <div class="hiw-timeline">
                        <div class="hiw-timeline-line"></div>

                        <div class="hiw-step reveal reveal-delay-1">
                            <div class="hiw-step-marker">
                                <div class="hiw-step-num">1</div>
                                <div class="hiw-step-pulse"></div>
                            </div>
                            <div class="hiw-step-card">
                                <div class="hiw-step-icon" style="background: linear-gradient(135deg, #4338ca, #7c3aed);"><i class="fas fa-pencil-ruler"></i></div>
                                <div class="hiw-step-content">
                                    <h3>Post Your Project</h3>
                                    <p class="hiw-step-desc">Define your construction requirements with our intelligent project builder. Our AI assists in categorizing scope and estimating preliminary budgets.</p>
                                    <div class="hiw-features">
                                        <div class="hiw-feature"><i class="fas fa-check-circle"></i> Upload blueprints, CAD files & structural drawings</div>
                                        <div class="hiw-feature"><i class="fas fa-check-circle"></i> AI-powered scope analysis & budget suggestions</div>
                                        <div class="hiw-feature"><i class="fas fa-check-circle"></i> Set timelines, milestones & deliverables</div>
                                        <div class="hiw-feature"><i class="fas fa-check-circle"></i> Choose from 15+ project categories</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="hiw-step reveal reveal-delay-2">
                            <div class="hiw-step-marker">
                                <div class="hiw-step-num">2</div>
                                <div class="hiw-step-pulse"></div>
                            </div>
                            <div class="hiw-step-card">
                                <div class="hiw-step-icon" style="background: linear-gradient(135deg, #06b6d4, #0891b2);"><i class="fas fa-users-cog"></i></div>
                                <div class="hiw-step-content">
                                    <h3>AI Matches & Expert Quotes</h3>
                                    <p class="hiw-step-desc">Our AI engine matches your project with the most qualified professionals globally. Receive competitive, detailed proposals within hours — not weeks.</p>
                                    <div class="hiw-features">
                                        <div class="hiw-feature"><i class="fas fa-check-circle"></i> Smart matching with PE-licensed engineers</div>
                                        <div class="hiw-feature"><i class="fas fa-check-circle"></i> Detailed proposals with cost & timeline breakdowns</div>
                                        <div class="hiw-feature"><i class="fas fa-check-circle"></i> Verified portfolios, ratings & certifications</div>
                                        <div class="hiw-feature"><i class="fas fa-check-circle"></i> Compare quotes side-by-side with AI insights</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="hiw-step reveal reveal-delay-3">
                            <div class="hiw-step-marker">
                                <div class="hiw-step-num">3</div>
                                <div class="hiw-step-pulse"></div>
                            </div>
                            <div class="hiw-step-card">
                                <div class="hiw-step-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);"><i class="fas fa-project-diagram"></i></div>
                                <div class="hiw-step-content">
                                    <h3>Collaborate in Real-Time</h3>
                                    <p class="hiw-step-desc">Work together seamlessly with built-in messaging, file sharing, version control, and milestone tracking — all within a single secure workspace.</p>
                                    <div class="hiw-features">
                                        <div class="hiw-feature"><i class="fas fa-check-circle"></i> Real-time messaging & video consultations</div>
                                        <div class="hiw-feature"><i class="fas fa-check-circle"></i> Secure file sharing with version history</div>
                                        <div class="hiw-feature"><i class="fas fa-check-circle"></i> Milestone tracking & payment escrow</div>
                                        <div class="hiw-feature"><i class="fas fa-check-circle"></i> Progress dashboard with automated updates</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="hiw-step reveal reveal-delay-3">
                            <div class="hiw-step-marker">
                                <div class="hiw-step-num">4</div>
                                <div class="hiw-step-pulse"></div>
                            </div>
                            <div class="hiw-step-card">
                                <div class="hiw-step-icon" style="background: linear-gradient(135deg, #10b981, #059669);"><i class="fas fa-chart-line"></i></div>
                                <div class="hiw-step-content">
                                    <h3>Deliver & Analyze</h3>
                                    <p class="hiw-step-desc">Complete your project with confidence. Access AI-powered analytics dashboards, generate detailed reports, and build long-term professional relationships.</p>
                                    <div class="hiw-features">
                                        <div class="hiw-feature"><i class="fas fa-check-circle"></i> AI analytics dashboard with ROI tracking</div>
                                        <div class="hiw-feature"><i class="fas fa-check-circle"></i> Automated report generation & export</div>
                                        <div class="hiw-feature"><i class="fas fa-check-circle"></i> Quality review & professional ratings</div>
                                        <div class="hiw-feature"><i class="fas fa-check-circle"></i> Save favorites & build your trusted network</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Portal Features Grid -->
                    <div class="hiw-portal-header reveal">
                        <h3 class="hiw-portal-title">Everything You Need — One Powerful Portal</h3>
                        <p class="hiw-portal-subtitle">Every tool, every insight, every connection — unified in a single enterprise-grade platform.</p>
                    </div>
                    <div class="hiw-portal-grid">
                        <div class="hiw-portal-card reveal reveal-delay-1">
                            <div class="hiw-portal-icon" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);"><i class="fas fa-brain"></i></div>
                            <h4>AI Cost Estimation</h4>
                            <p>Upload drawings or enter project details. Get instant, accurate cost and timeline estimates powered by machine learning trained on 12,000+ real projects.</p>
                        </div>
                        <div class="hiw-portal-card reveal reveal-delay-1">
                            <div class="hiw-portal-icon" style="background: linear-gradient(135deg, #4338ca, #7c3aed);"><i class="fas fa-tachometer-alt"></i></div>
                            <h4>Smart Dashboard</h4>
                            <p>Real-time analytics, project tracking, financial overview, and team performance metrics — all in a single, beautiful command center.</p>
                        </div>
                        <div class="hiw-portal-card reveal reveal-delay-2">
                            <div class="hiw-portal-icon" style="background: linear-gradient(135deg, #06b6d4, #0891b2);"><i class="fas fa-search"></i></div>
                            <h4>Expert Discovery</h4>
                            <p>Browse verified structural engineers, detailers, and designers worldwide. Filter by expertise, ratings, certifications, and availability.</p>
                        </div>
                        <div class="hiw-portal-card reveal reveal-delay-2">
                            <div class="hiw-portal-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);"><i class="fas fa-file-contract"></i></div>
                            <h4>Project Management</h4>
                            <p>Create, assign, and track projects end-to-end. Built-in milestones, file versioning, escrow payments, and automated notifications.</p>
                        </div>
                        <div class="hiw-portal-card reveal reveal-delay-3">
                            <div class="hiw-portal-icon" style="background: linear-gradient(135deg, #ec4899, #db2777);"><i class="fas fa-comments"></i></div>
                            <h4>Secure Messaging</h4>
                            <p>Real-time chat, video calls, and file sharing within every project workspace. End-to-end encrypted for enterprise-grade security.</p>
                        </div>
                        <div class="hiw-portal-card reveal reveal-delay-3">
                            <div class="hiw-portal-icon" style="background: linear-gradient(135deg, #10b981, #059669);"><i class="fas fa-shield-alt"></i></div>
                            <h4>Trust & Compliance</h4>
                            <p>Verified credentials, PE license checks, insurance validation, and NDA management. Built for enterprise compliance and peace of mind.</p>
                        </div>
                    </div>

                </div>
            </section>

            <section id="why-steelconnect" class="why-sc-section">
                <div class="why-sc-orb why-sc-orb-1"></div>
                <div class="why-sc-orb why-sc-orb-2"></div>
                <div class="why-sc-grid-bg"></div>
                <div class="why-sc-container">
                    <div class="why-sc-header">
                        <span class="why-sc-badge reveal"><i class="fas fa-award"></i> Why Choose Us</span>
                        <h2 class="why-sc-title reveal">Why SteelConnect?</h2>
                        <p class="why-sc-subtitle reveal reveal-delay-1">The world's most trusted AI-powered construction platform — built for enterprises that demand excellence.</p>
                    </div>

                    <!-- Feature 1: Full-width hero card -->
                    <div class="why-sc-hero-card reveal">
                        <div class="why-sc-hero-img">
                            <img src="https://images.unsplash.com/photo-1504307651254-35680f356dfd?q=80&w=2940&auto=format&fit=crop" alt="Global network of construction engineers">
                            <div class="why-sc-hero-img-overlay"></div>
                        </div>
                        <div class="why-sc-hero-content">
                            <div class="why-sc-hero-icon"><i class="fas fa-globe-americas"></i></div>
                            <h3>Global Network of Elite Engineers</h3>
                            <p>Access a worldwide community of PE-licensed structural engineers, detailers, and certified professionals ready to tackle your most challenging projects — across every time zone.</p>
                            <div class="why-sc-hero-features">
                                <div class="why-sc-hero-feat"><i class="fas fa-check-circle"></i> PE-licensed engineers across 50+ jurisdictions</div>
                                <div class="why-sc-hero-feat"><i class="fas fa-check-circle"></i> Specialized seismic, wind & structural expertise</div>
                                <div class="why-sc-hero-feat"><i class="fas fa-check-circle"></i> Multi-language support for global collaboration</div>
                                <div class="why-sc-hero-feat"><i class="fas fa-check-circle"></i> 24/7 availability across all time zones</div>
                            </div>
                            <div class="why-sc-hero-stats">
                                <div class="why-sc-hero-stat"><span class="why-sc-hero-stat-num">2,500+</span><span class="why-sc-hero-stat-label">Professionals</span></div>
                                <div class="why-sc-hero-stat"><span class="why-sc-hero-stat-num">50+</span><span class="why-sc-hero-stat-label">Countries</span></div>
                                <div class="why-sc-hero-stat"><span class="why-sc-hero-stat-num">98%</span><span class="why-sc-hero-stat-label">Satisfaction</span></div>
                            </div>
                        </div>
                    </div>

                    <!-- Feature 2 & 3: Two-column cards -->
                    <div class="why-sc-duo-grid">
                        <div class="why-sc-card reveal reveal-delay-1">
                            <div class="why-sc-card-img">
                                <img src="https://images.unsplash.com/photo-1581094794329-c8112a89af12?q=80&w=2940&auto=format&fit=crop" alt="Advanced engineering technology">
                                <div class="why-sc-card-img-overlay"></div>
                            </div>
                            <div class="why-sc-card-body">
                                <div class="why-sc-card-icon" style="background: linear-gradient(135deg, #06b6d4, #0891b2);"><i class="fas fa-microchip"></i></div>
                                <h3>Advanced Engineering Solutions</h3>
                                <p>From initial concept to final construction drawings — cutting-edge BIM, 3D modeling, and structural analysis tools powering precision engineering.</p>
                                <ul class="why-sc-card-list">
                                    <li><i class="fas fa-check-circle"></i> Latest BIM & 3D modeling capabilities</li>
                                    <li><i class="fas fa-check-circle"></i> Advanced structural analysis software</li>
                                    <li><i class="fas fa-check-circle"></i> Code compliance across all major standards</li>
                                    <li><i class="fas fa-check-circle"></i> Sustainable & green design practices</li>
                                </ul>
                            </div>
                        </div>

                        <div class="why-sc-card reveal reveal-delay-2">
                            <div class="why-sc-card-img">
                                <img src="https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?q=80&w=2940&auto=format&fit=crop" alt="Proven track record of success">
                                <div class="why-sc-card-img-overlay"></div>
                            </div>
                            <div class="why-sc-card-body">
                                <div class="why-sc-card-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);"><i class="fas fa-trophy"></i></div>
                                <h3>Proven Track Record</h3>
                                <p>Thousands of completed projects — from residential towers to mega infrastructure — backed by verified reviews, portfolios, and quality guarantees.</p>
                                <ul class="why-sc-card-list">
                                    <li><i class="fas fa-check-circle"></i> Verified credentials & PE licenses</li>
                                    <li><i class="fas fa-check-circle"></i> Comprehensive project portfolios</li>
                                    <li><i class="fas fa-check-circle"></i> Client reviews & ratings system</li>
                                    <li><i class="fas fa-check-circle"></i> Quality assurance & project insurance</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Bottom stat bar -->
                    <div class="why-sc-stat-bar reveal">
                        <div class="why-sc-stat-item">
                            <i class="fas fa-shield-alt"></i>
                            <div><strong>Enterprise Security</strong><span>SOC 2 Compliant</span></div>
                        </div>
                        <div class="why-sc-stat-divider"></div>
                        <div class="why-sc-stat-item">
                            <i class="fas fa-headset"></i>
                            <div><strong>24/7 Support</strong><span>Dedicated team</span></div>
                        </div>
                        <div class="why-sc-stat-divider"></div>
                        <div class="why-sc-stat-item">
                            <i class="fas fa-money-bill-wave"></i>
                            <div><strong>Escrow Protection</strong><span>Secure payments</span></div>
                        </div>
                        <div class="why-sc-stat-divider"></div>
                        <div class="why-sc-stat-item">
                            <i class="fas fa-file-contract"></i>
                            <div><strong>NDA & Compliance</strong><span>Built-in tools</span></div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="showcase" class="showcase">
                <div class="section-container">
                    <h2 class="section-title reveal">Industry Excellence Showcase</h2>
                    <div class="showcase-grid">
                        <div class="showcase-card reveal reveal-delay-1"><img src="https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?q=80&w=2940&auto=format&fit=crop" alt="Modern skyscraper" class="showcase-image" onerror="this.onerror=null;this.src='https://placehold.co/400x240/f1f5f9/64748b?text=High-Rise';"><div class="showcase-content"><h3>High-Rise Construction</h3><p>Structural design for towers and commercial buildings with advanced seismic engineering and wind load analysis.</p></div></div>
                        <div class="showcase-card reveal reveal-delay-2"><img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?q=80&w=2940&auto=format&fit=crop" alt="Steel bridge" class="showcase-image" onerror="this.onerror=null;this.src='https://placehold.co/400x240/f1f5f9/64748b?text=Bridge';"><div class="showcase-content"><h3>Infrastructure Projects</h3><p>Complex bridge design, highway infrastructure, and transportation networks engineered for safety and longevity.</p></div></div>
                        <div class="showcase-card reveal reveal-delay-3"><img src="https://images.unsplash.com/photo-1565008447742-97f6f38c985c?q=80&w=2940&auto=format&fit=crop" alt="Industrial facility" class="showcase-image" onerror="this.onerror=null;this.src='https://placehold.co/400x240/f1f5f9/64748b?text=Industrial';"><div class="showcase-content"><h3>Industrial Facilities</h3><p>Manufacturing plants, warehouses, and industrial complexes with specialized frame solutions and heavy load engineering.</p></div></div>
                    </div>
                </div>
            </section>

            <!-- Content Gate: Email Required to Continue -->
            <div class="content-gate" id="contentGate">
                <div class="cg-inner">
                    <div class="cg-lock-icon"><i class="fas fa-lock"></i></div>
                    <h3 class="cg-title">Want to see more?</h3>
                    <p class="cg-text">Enter your email to unlock client testimonials, project showcases, pricing details, and free AI estimation access.</p>

                    <div class="cg-preview-cards">
                        <div class="cg-preview-card">
                            <i class="fas fa-star" style="color:#f59e0b;"></i>
                            <span>Client Reviews & Success Stories</span>
                        </div>
                        <div class="cg-preview-card">
                            <i class="fas fa-calculator" style="color:#2563eb;"></i>
                            <span>Free AI Cost Estimation Tool</span>
                        </div>
                        <div class="cg-preview-card">
                            <i class="fas fa-file-invoice-dollar" style="color:#10b981;"></i>
                            <span>Detailed Cost Breakdowns & BOQ</span>
                        </div>
                        <div class="cg-preview-card">
                            <i class="fas fa-users-cog" style="color:#7c3aed;"></i>
                            <span>Connect with Verified Designers</span>
                        </div>
                    </div>

                    <form class="cg-form" onsubmit="return unlockContent(event)">
                        <div class="cg-input-wrap">
                            <input type="email" class="cg-input" id="cgEmailInput" placeholder="Enter your email to continue" required>
                            <button type="submit" class="cg-btn">
                                <span class="cg-btn-text"><i class="fas fa-unlock"></i> Unlock</span>
                                <span class="cg-btn-loading" style="display:none;"><i class="fas fa-spinner fa-spin"></i></span>
                            </button>
                        </div>
                    </form>
                    <p class="cg-note">Free access. No credit card. Unsubscribe anytime.</p>
                </div>
            </div>

            <!-- Gated Content (hidden until email entered) -->
            <div id="gatedContent" style="display:none;">

            <!-- Testimonials Carousel -->
            <section class="testimonials-section">
                <div class="testimonials-container">
                    <h2 class="section-title reveal" style="background: linear-gradient(135deg, #0f172a, #1e3a8a, #2563eb); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">What Our Clients Say</h2>
                    <p class="section-subtitle reveal reveal-delay-1">Hear from professionals who transformed their business with SteelConnect.</p>
                    <div class="testimonials-carousel reveal-scale" id="testimonials-carousel">
                        <div class="testimonials-track" id="testimonials-track">
                            <div class="testimonial-card">
                                <div class="testimonial-quote">
                                    <div class="testimonial-stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                                    <p class="testimonial-text">"SteelConnect revolutionized how we find and collaborate with structural engineers. The AI estimation tool alone saved us weeks of preliminary planning on every project."</p>
                                    <div class="testimonial-author">
                                        <div class="testimonial-avatar">JM</div>
                                        <div class="testimonial-info"><h4>James Morrison</h4><p>CEO, Morrison Construction Group</p></div>
                                    </div>
                                </div>
                                <div class="testimonial-visual">
                                    <div class="testimonial-stat"><span class="testimonial-stat-value">40%</span><span class="testimonial-stat-label">Time Saved</span></div>
                                    <div class="testimonial-stat"><span class="testimonial-stat-value">$2.1M</span><span class="testimonial-stat-label">Projects Managed</span></div>
                                </div>
                            </div>
                            <div class="testimonial-card">
                                <div class="testimonial-quote">
                                    <div class="testimonial-stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                                    <p class="testimonial-text">"As a freelance structural designer, SteelConnect opened doors to international projects I never thought possible. The platform is incredibly professional and easy to use."</p>
                                    <div class="testimonial-author">
                                        <div class="testimonial-avatar" style="background: linear-gradient(135deg, #8b5cf6, #ec4899);">SP</div>
                                        <div class="testimonial-info"><h4>Sarah Patel</h4><p>Senior Structural Engineer, Independent</p></div>
                                    </div>
                                </div>
                                <div class="testimonial-visual">
                                    <div class="testimonial-stat"><span class="testimonial-stat-value">85+</span><span class="testimonial-stat-label">Projects Completed</span></div>
                                    <div class="testimonial-stat"><span class="testimonial-stat-value">12</span><span class="testimonial-stat-label">Countries Served</span></div>
                                </div>
                            </div>
                            <div class="testimonial-card">
                                <div class="testimonial-quote">
                                    <div class="testimonial-stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                                    <p class="testimonial-text">"The business analytics dashboard gives us real-time insights that drive smarter decisions. SteelConnect isn't just a marketplace - it's a complete business management platform."</p>
                                    <div class="testimonial-author">
                                        <div class="testimonial-avatar" style="background: linear-gradient(135deg, #f59e0b, #ef4444);">RK</div>
                                        <div class="testimonial-info"><h4>Rajesh Kumar</h4><p>Director, Kumar Steel Works</p></div>
                                    </div>
                                </div>
                                <div class="testimonial-visual">
                                    <div class="testimonial-stat"><span class="testimonial-stat-value">3x</span><span class="testimonial-stat-label">Revenue Growth</span></div>
                                    <div class="testimonial-stat"><span class="testimonial-stat-value">98%</span><span class="testimonial-stat-label">Client Retention</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="testimonials-dots" id="testimonials-dots">
                        <button class="testimonial-dot active" onclick="goToTestimonial(0)"></button>
                        <button class="testimonial-dot" onclick="goToTestimonial(1)"></button>
                        <button class="testimonial-dot" onclick="goToTestimonial(2)"></button>
                    </div>
                </div>
            </section>

            <!-- CTA Section -->
            <section class="cta-section">
                <div class="cta-content reveal">
                    <h2 class="cta-title">Ready to Transform Your Construction Business?</h2>
                    <p class="cta-subtitle">Join thousands of professionals who trust SteelConnect to find projects, collaborate with experts, and grow their business.</p>
                    <div class="cta-buttons">
                        <button class="cta-btn-primary" onclick="document.getElementById('join-btn')?.click()"><i class="fas fa-rocket"></i> Get Started Free</button>
                        <button class="cta-btn-secondary" onclick="document.querySelector('#ai-estimation')?.scrollIntoView({behavior:'smooth'})"><i class="fas fa-brain"></i> Try AI Estimation</button>
                    </div>
                </div>
            </section>

            </div><!-- end #gatedContent -->

            <!-- Smart Lead Capture: Interactive Mini Estimator + Value Gate -->
            <section class="lead-capture-section" id="stay-connected">
                <div class="lc-container">
                    <div class="lc-header">
                        <span class="lc-badge"><i class="fas fa-bolt"></i> Free Instant Estimate</span>
                        <h2 class="lc-title">Get Your Project Cost Estimate in 60 Seconds</h2>
                        <p class="lc-subtitle">Our AI analyzes 10,000+ real construction projects to give you an accurate range — no signup required to start.</p>
                    </div>

                    <!-- Step 1: Mini Calculator -->
                    <div class="lc-calculator" id="lcStep1">
                        <div class="lc-calc-grid">
                            <div class="lc-field">
                                <label class="lc-label"><i class="fas fa-building"></i> Project Type</label>
                                <select class="lc-select" id="lcProjectType">
                                    <option value="">Select type...</option>
                                    <option value="Industrial / Warehouse">Industrial / Warehouse</option>
                                    <option value="Commercial Office">Commercial Office</option>
                                    <option value="Residential">Residential</option>
                                    <option value="Retail / Shopping">Retail / Shopping</option>
                                    <option value="Pre-Engineered Building">Pre-Engineered Building (PEB)</option>
                                    <option value="Healthcare">Healthcare</option>
                                    <option value="Educational">Educational</option>
                                    <option value="Mixed-Use">Mixed-Use</option>
                                </select>
                            </div>
                            <div class="lc-field">
                                <label class="lc-label"><i class="fas fa-ruler-combined"></i> Approximate Area</label>
                                <div class="lc-input-row">
                                    <input type="number" class="lc-input" id="lcArea" placeholder="e.g. 5000" min="100">
                                    <select class="lc-unit-select" id="lcUnit">
                                        <option value="sqft">sq ft</option>
                                        <option value="sqm">sq m</option>
                                    </select>
                                </div>
                            </div>
                            <div class="lc-field">
                                <label class="lc-label"><i class="fas fa-map-marker-alt"></i> Location</label>
                                <select class="lc-select" id="lcRegion">
                                    <option value="">Select region...</option>
                                    <option value="India">India</option>
                                    <option value="USA">United States</option>
                                    <option value="UAE">UAE / Gulf</option>
                                    <option value="UK">United Kingdom</option>
                                    <option value="Southeast Asia">Southeast Asia</option>
                                    <option value="Africa">Africa</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="lc-field lc-field-btn">
                                <button class="lc-estimate-btn" id="lcEstimateBtn" onclick="runMiniEstimate()">
                                    <i class="fas fa-calculator"></i> Calculate My Estimate
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Blurred Preview + Email Gate -->
                    <div class="lc-result-gate" id="lcStep2" style="display:none;">
                        <!-- Blurred teaser estimate -->
                        <div class="lc-teaser">
                            <div class="lc-teaser-header">
                                <i class="fas fa-check-circle" style="color:#10b981;"></i>
                                <span>Your estimate is ready!</span>
                            </div>
                            <div class="lc-teaser-preview">
                                <div class="lc-teaser-row">
                                    <span class="lc-teaser-label">Project Type</span>
                                    <span class="lc-teaser-value" id="lcPreviewType">—</span>
                                </div>
                                <div class="lc-teaser-row">
                                    <span class="lc-teaser-label">Estimated Range</span>
                                    <span class="lc-teaser-value lc-blurred" id="lcPreviewRange">$450,000 - $820,000</span>
                                </div>
                                <div class="lc-teaser-row">
                                    <span class="lc-teaser-label">Cost per sq ft</span>
                                    <span class="lc-teaser-value lc-blurred" id="lcPreviewRate">$145 - $210</span>
                                </div>
                                <div class="lc-teaser-row">
                                    <span class="lc-teaser-label">Steel Tonnage</span>
                                    <span class="lc-teaser-value lc-blurred">12.5 - 18.2 tons</span>
                                </div>
                                <div class="lc-teaser-row">
                                    <span class="lc-teaser-label">Concrete Volume</span>
                                    <span class="lc-teaser-value lc-blurred">85 - 140 CY</span>
                                </div>
                            </div>
                            <div class="lc-blur-overlay">
                                <i class="fas fa-lock"></i>
                                <span>Enter your email to unlock full estimate</span>
                            </div>
                        </div>

                        <!-- What you'll get -->
                        <div class="lc-unlock-features">
                            <h3 class="lc-unlock-title">What you'll unlock:</h3>
                            <div class="lc-features-grid">
                                <div class="lc-feature">
                                    <div class="lc-feature-icon" style="background:#eff6ff;color:#2563eb;"><i class="fas fa-file-invoice-dollar"></i></div>
                                    <div class="lc-feature-text">
                                        <strong>Detailed Cost Breakdown</strong>
                                        <span>Trade-by-trade costs: structural steel, concrete, MEP, finishes, sitework</span>
                                    </div>
                                </div>
                                <div class="lc-feature">
                                    <div class="lc-feature-icon" style="background:#f0fdf4;color:#16a34a;"><i class="fas fa-clipboard-list"></i></div>
                                    <div class="lc-feature-text">
                                        <strong>Material Bill of Quantities</strong>
                                        <span>Procurement-ready BOQ with exact quantities, specs, and unit rates</span>
                                    </div>
                                </div>
                                <div class="lc-feature">
                                    <div class="lc-feature-icon" style="background:#fef3c7;color:#d97706;"><i class="fas fa-hard-hat"></i></div>
                                    <div class="lc-feature-text">
                                        <strong>Manpower & Timeline</strong>
                                        <span>Crew breakdown, labor hours, and estimated project duration</span>
                                    </div>
                                </div>
                                <div class="lc-feature">
                                    <div class="lc-feature-icon" style="background:#f5f3ff;color:#7c3aed;"><i class="fas fa-chart-bar"></i></div>
                                    <div class="lc-feature-text">
                                        <strong>Market Benchmarks</strong>
                                        <span>Compare your estimate against industry rates for your region</span>
                                    </div>
                                </div>
                                <div class="lc-feature">
                                    <div class="lc-feature-icon" style="background:#fef2f2;color:#dc2626;"><i class="fas fa-file-pdf"></i></div>
                                    <div class="lc-feature-text">
                                        <strong>PDF Drawing Analysis</strong>
                                        <span>Upload drawings and get AI-powered quantity takeoff from blueprints</span>
                                    </div>
                                </div>
                                <div class="lc-feature">
                                    <div class="lc-feature-icon" style="background:#ecfdf5;color:#059669;"><i class="fas fa-users-cog"></i></div>
                                    <div class="lc-feature-text">
                                        <strong>Connect with Designers</strong>
                                        <span>Get matched with verified structural designers and receive competitive quotes</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Email capture form -->
                        <div class="lc-email-gate">
                            <form class="lc-gate-form" onsubmit="return captureProspectEmail(event, false, 'mini-estimator')">
                                <input type="email" class="lc-gate-input" placeholder="Enter your work email to unlock" required>
                                <button type="submit" class="lc-gate-btn">
                                    <span class="prospect-btn-text"><i class="fas fa-unlock"></i> Unlock Full Estimate</span>
                                    <span class="prospect-btn-loading" style="display:none;"><i class="fas fa-spinner fa-spin"></i></span>
                                </button>
                            </form>
                            <p class="lc-gate-note"><i class="fas fa-shield-alt"></i> Free forever. No credit card. Cancel anytime.</p>
                        </div>

                        <button class="lc-back-btn" onclick="document.getElementById('lcStep1').style.display='';document.getElementById('lcStep2').style.display='none';">
                            <i class="fas fa-arrow-left"></i> Modify inputs
                        </button>
                    </div>

                    <!-- Step 3: Success State -->
                    <div class="lc-success" id="lcStep3" style="display:none;">
                        <div class="lc-success-icon"><i class="fas fa-check-circle"></i></div>
                        <h3 class="lc-success-title">You're In!</h3>
                        <p class="lc-success-text">We've sent you an invitation to access the full platform. Check your inbox for login details.</p>
                        <div class="lc-success-next">
                            <p>While you wait, here's what SteelConnect members get:</p>
                            <div class="lc-success-perks">
                                <div class="lc-perk"><i class="fas fa-brain"></i> Unlimited AI cost estimates</div>
                                <div class="lc-perk"><i class="fas fa-file-pdf"></i> PDF drawing analysis</div>
                                <div class="lc-perk"><i class="fas fa-comments"></i> Real-time messaging with designers</div>
                                <div class="lc-perk"><i class="fas fa-briefcase"></i> Job posting & quoting system</div>
                                <div class="lc-perk"><i class="fas fa-chart-line"></i> Market rate benchmarks</div>
                                <div class="lc-perk"><i class="fas fa-mobile-alt"></i> Mobile-friendly portal</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Sticky bottom email bar (shows on scroll past hero) -->
            <div class="prospect-bar" id="prospectBar" style="display:none;">
                <span class="prospect-bar-text">Get a free AI cost estimate for your project</span>
                <form class="prospect-bar-form" onsubmit="return captureProspectEmail(event, false, 'scroll-bar')">
                    <input type="email" class="prospect-bar-input" placeholder="Enter your email" required>
                    <button type="submit" class="prospect-bar-btn">Get Started</button>
                </form>
                <button class="prospect-bar-close" id="prospectBarClose">&times;</button>
            </div>

            <!-- Prospect Popup (shows on scroll 50% or exit intent) -->
            <div class="prospect-popup-overlay" id="prospectPopup" style="display:none;">
                <div class="prospect-popup">
                    <button class="prospect-popup-close" id="prospectPopupClose" aria-label="Close">&times;</button>
                    <div class="prospect-popup-icon"><i class="fas fa-gift"></i></div>
                    <h3 class="prospect-popup-title">Unlock Free AI Cost Estimation</h3>
                    <p class="prospect-popup-text">Join 500+ construction professionals already using SteelConnect.</p>
                    <div class="prospect-popup-perks">
                        <div class="pp-perk"><i class="fas fa-check" style="color:#10b981;"></i> AI estimates from PDF drawings</div>
                        <div class="pp-perk"><i class="fas fa-check" style="color:#10b981;"></i> Trade-by-trade cost breakdown</div>
                        <div class="pp-perk"><i class="fas fa-check" style="color:#10b981;"></i> Material BOQ with quantities</div>
                        <div class="pp-perk"><i class="fas fa-check" style="color:#10b981;"></i> Connect with verified designers</div>
                    </div>
                    <form class="prospect-popup-form" onsubmit="return captureProspectEmail(event, true)">
                        <input type="email" class="prospect-popup-input" placeholder="Your work email" required>
                        <button type="submit" class="prospect-popup-btn"><i class="fas fa-unlock"></i> Get Free Access</button>
                    </form>
                    <p class="prospect-popup-note"><i class="fas fa-shield-alt"></i> Free forever. No credit card needed.</p>
                </div>
            </div>

            <!-- Footer -->
            <footer class="site-footer">
                <div class="footer-container">
                    <div class="footer-brand">
                        <a href="#" class="logo"><div class="logo-icon">SC</div> SteelConnect</a>
                        <p>The premier marketplace connecting steel designers, structural engineers, and contractors worldwide. Powered by AI for smarter project management.</p>
                    </div>
                    <div class="footer-column">
                        <h4>Platform</h4>
                        <a href="#ai-estimation">AI Estimation</a>
                        <a href="#business-analytics">Analytics</a>
                        <a href="#how-it-works">How It Works</a>
                        <a href="#showcase">Showcase</a>
                    </div>
                    <div class="footer-column">
                        <h4>Company</h4>
                        <a href="#">About Us</a>
                        <a href="#">Careers</a>
                        <a href="#">Blog</a>
                        <a href="#">Contact</a>
                    </div>
                    <div class="footer-column">
                        <h4>Legal</h4>
                        <a href="#">Privacy Policy</a>
                        <a href="#">Terms of Service</a>
                        <a href="#">Cookie Policy</a>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>&copy; 2026 SteelConnect. All rights reserved. Built for the future of construction.</p>
                </div>
            </footer>
        </main>
    </div>

    <div id="app-content" class="main-layout" style="display: none;">
        <div class="sidebar-overlay" id="sidebarOverlay"></div>
        <aside class="sidebar" id="portalSidebar">
            <div class="sidebar-close-btn" id="sidebarCloseBtn">
                <i class="fas fa-times"></i>
            </div>
            <div class="sidebar-user-profile">
                <div id="sidebarUserAvatar" class="sidebar-avatar"></div>
                <h3 id="sidebarUserName"></h3>
                <p id="sidebarUserType"></p>
            </div>
            <nav id="sidebar-nav-menu" class="sidebar-nav"></nav>
        </aside>
        <main class="main-content">
            <div id="app-container" class="main-container"></div>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.2/dist/jspdf.umd.min.js"></script>
    <script src="script.js?v=20260215a" defer></script>
    
    <script>
        // Analytics Integration Script
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() {
                if (typeof appState !== 'undefined' && typeof buildSidebarNav === 'function') {
                    const script = document.createElement('script');
                    script.src = 'analytics-integration.js?v=20260215a';
                    script.onload = function() {
                        if (appState.currentUser && appState.currentUser.type === 'contractor') {
                            buildSidebarNav();
                        }
                    };
                    document.head.appendChild(script);
                } else {
                    setTimeout(arguments.callee, 1000);
                }
            }, 500);
        });

        // Business Analytics Chart Script
        document.addEventListener('DOMContentLoaded', function() {
            const ctx = document.getElementById('analytics-chart');
            if (ctx) {
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                        datasets: [{
                            label: 'Revenue', data: [1.2, 1.3, 1.5, 1.4, 1.7, 1.8, 1.9, 2.1, 2.2, 2.4, 2.5, 2.8],
                            borderColor: '#4338ca', backgroundColor: 'rgba(67, 56, 202, 0.1)',
                            borderWidth: 3, tension: 0.4, fill: true
                        }, {
                            label: 'Projects', data: [85, 92, 88, 95, 102, 108, 115, 124, 128, 135, 142, 158],
                            borderColor: '#7c3aed', backgroundColor: 'rgba(124, 58, 237, 0.1)',
                            borderWidth: 3, tension: 0.4, fill: true
                        }]
                    },
                    options: {
                        responsive: true, maintainAspectRatio: false,
                        plugins: {
                            legend: { display: true, position: 'top', labels: { usePointStyle: true, padding: 20, color: '#64748b' }},
                            tooltip: {
                                backgroundColor: '#ffffff', borderColor: '#e2e8f0', borderWidth: 1,
                                padding: 12, cornerRadius: 8,
                                titleFont: { size: 14, weight: '600' }, titleColor: '#0f172a', bodyColor: '#64748b',
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) { label += ': '; }
                                        if (context.dataset.label === 'Revenue') { label += '$' + context.parsed.y + 'M'; }
                                        else { label += context.parsed.y; }
                                        return label;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: { beginAtZero: true, grid: { borderDash: [3, 3], color: 'rgba(0, 0, 0, 0.06)' }, ticks: { color: '#94a3b8' }},
                            x: { grid: { display: false }, ticks: { color: '#94a3b8' }}
                        }
                    }
                });
            }
        });

        // === WORLD-CLASS ANIMATIONS ===

        // Scroll Reveal Observer
        document.addEventListener('DOMContentLoaded', function() {
            const revealElements = document.querySelectorAll('.reveal, .reveal-left, .reveal-right, .reveal-scale');
            const revealObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.1, rootMargin: '0px 0px -40px 0px' });
            revealElements.forEach(el => revealObserver.observe(el));
        });

        // Animated Counter for Hero Stats
        document.addEventListener('DOMContentLoaded', function() {
            function animateCounter(el, target, suffix) {
                let current = 0;
                const increment = target / 60;
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        current = target;
                        clearInterval(timer);
                    }
                    el.textContent = Math.floor(current).toLocaleString() + suffix;
                }, 16);
            }
            const statsObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && !entry.target.dataset.counted) {
                        entry.target.dataset.counted = 'true';
                        const statNumbers = entry.target.querySelectorAll('.hero-stat-number');
                        statNumbers.forEach(el => {
                            const text = el.textContent;
                            const num = parseInt(text.replace(/[^0-9]/g, ''));
                            const suffix = text.replace(/[0-9,]/g, '');
                            el.textContent = '0' + suffix;
                            animateCounter(el, num, suffix);
                        });
                    }
                });
            }, { threshold: 0.5 });
            const heroStats = document.querySelector('.hero-stats');
            if (heroStats) statsObserver.observe(heroStats);
        });

        // Testimonials Auto-Slider
        let currentTestimonial = 0;
        const totalTestimonials = 3;
        let testimonialInterval;
        function goToTestimonial(index) {
            currentTestimonial = index;
            const track = document.getElementById('testimonials-track');
            if (track) track.style.transform = 'translateX(-' + (index * 100) + '%)';
            document.querySelectorAll('.testimonial-dot').forEach((dot, i) => {
                dot.classList.toggle('active', i === index);
            });
        }
        function startTestimonialAutoPlay() {
            testimonialInterval = setInterval(() => {
                currentTestimonial = (currentTestimonial + 1) % totalTestimonials;
                goToTestimonial(currentTestimonial);
            }, 5000);
        }
        document.addEventListener('DOMContentLoaded', function() {
            startTestimonialAutoPlay();
            const carousel = document.getElementById('testimonials-carousel');
            if (carousel) {
                carousel.addEventListener('mouseenter', () => clearInterval(testimonialInterval));
                carousel.addEventListener('mouseleave', startTestimonialAutoPlay);
            }
        });

        // Why SteelConnect Slider Auto-Play with Progress
        document.addEventListener('DOMContentLoaded', function() {
            let sliderAutoPlay;
            function startSliderAutoPlay() {
                sliderAutoPlay = setInterval(() => {
                    if (typeof changeSlide === 'function') changeSlide(1);
                }, 6000);
            }
            startSliderAutoPlay();
            const sliderContainer = document.querySelector('.slider-container');
            if (sliderContainer) {
                sliderContainer.addEventListener('mouseenter', () => clearInterval(sliderAutoPlay));
                sliderContainer.addEventListener('mouseleave', startSliderAutoPlay);
            }
        });

        // Smooth Scroll for Navigation
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    const target = document.querySelector(targetId);
                    if (target) {
                        e.preventDefault();
                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });
        });

        // Parallax effect on hero background
        document.addEventListener('DOMContentLoaded', function() {
            const heroBg = document.querySelector('.hero-background');
            if (heroBg) {
                window.addEventListener('scroll', function() {
                    const scrolled = window.pageYOffset;
                    if (scrolled < window.innerHeight) {
                        heroBg.style.transform = 'translateY(' + (scrolled * 0.3) + 'px)';
                    }
                }, { passive: true });
            }
        });

        // Hero Image Rotation - cycles every 5 seconds with crossfade
        document.addEventListener('DOMContentLoaded', function() {
            const heroSlides = document.querySelectorAll('.hero-slide');
            const heroBgSlides = document.querySelectorAll('.hero-bg-slide');
            const heroDots = document.querySelectorAll('.hero-slide-dot');
            if (heroSlides.length === 0) return;

            let currentSlide = 0;
            let heroInterval = null;
            const SLIDE_DURATION = 5000;

            function goToSlide(index) {
                heroSlides.forEach(function(s) { s.classList.remove('active'); });
                heroBgSlides.forEach(function(s) { s.classList.remove('active'); });
                heroDots.forEach(function(d) { d.classList.remove('active'); });

                currentSlide = index;
                heroSlides[currentSlide].classList.add('active');
                if (heroBgSlides[currentSlide]) heroBgSlides[currentSlide].classList.add('active');
                heroDots[currentSlide].classList.add('active');
            }

            function nextSlide() {
                var next = (currentSlide + 1) % heroSlides.length;
                goToSlide(next);
            }

            function startAutoplay() {
                if (heroInterval) clearInterval(heroInterval);
                heroInterval = setInterval(nextSlide, SLIDE_DURATION);
            }

            function resetAutoplay() {
                clearInterval(heroInterval);
                startAutoplay();
            }

            heroDots.forEach(function(dot) {
                dot.addEventListener('click', function() {
                    var slideIndex = parseInt(this.getAttribute('data-slide'));
                    goToSlide(slideIndex);
                    resetAutoplay();
                });
            });

            // Pause on hover for better UX
            var heroContainer = document.querySelector('.hero-image-container');
            if (heroContainer) {
                heroContainer.addEventListener('mouseenter', function() {
                    clearInterval(heroInterval);
                });
                heroContainer.addEventListener('mouseleave', function() {
                    startAutoplay();
                });
            }

            startAutoplay();
        });

        // AI Features Showcase Carousel Auto-Play
        let currentAIFeature = 0;
        const totalAIFeatures = 3;
        let aiFeatureInterval;
        function goToAIFeature(index) {
            currentAIFeature = index;
            const track = document.getElementById('ai-features-track');
            if (track) track.style.transform = 'translateX(-' + (index * 100) + '%)';
            document.querySelectorAll('.ai-feature-dot').forEach((dot, i) => {
                dot.classList.toggle('active', i === index);
            });
        }
        function startAIFeatureAutoPlay() {
            aiFeatureInterval = setInterval(() => {
                currentAIFeature = (currentAIFeature + 1) % totalAIFeatures;
                goToAIFeature(currentAIFeature);
            }, 5000);
        }
        document.addEventListener('DOMContentLoaded', function() {
            startAIFeatureAutoPlay();
            const aiCarousel = document.getElementById('ai-features-carousel');
            if (aiCarousel) {
                aiCarousel.addEventListener('mouseenter', () => clearInterval(aiFeatureInterval));
                aiCarousel.addEventListener('mouseleave', startAIFeatureAutoPlay);
            }
        });

        // Ripple Effect on Buttons
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.btn, .dashboard-btn, .cta-btn-primary, .cta-btn-secondary').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    const ripple = document.createElement('span');
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    ripple.style.cssText = 'position:absolute;border-radius:50%;background:rgba(255,255,255,0.3);pointer-events:none;transform:scale(0);animation:rippleEffect 0.6s ease-out;width:' + size + 'px;height:' + size + 'px;left:' + (e.clientX - rect.left - size/2) + 'px;top:' + (e.clientY - rect.top - size/2) + 'px;';
                    this.style.position = this.style.position || 'relative';
                    this.style.overflow = 'hidden';
                    this.appendChild(ripple);
                    setTimeout(() => ripple.remove(), 600);
                });
            });
        });

        // Animate KPI values when they come into view
        document.addEventListener('DOMContentLoaded', function() {
            const kpiObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && !entry.target.dataset.animated) {
                        entry.target.dataset.animated = 'true';
                        const kpiValues = entry.target.querySelectorAll('.kpi-value');
                        kpiValues.forEach((el, i) => {
                            el.style.opacity = '0';
                            el.style.transform = 'translateY(20px)';
                            el.style.transition = 'all 0.6s cubic-bezier(0.16, 1, 0.3, 1)';
                            setTimeout(() => {
                                el.style.opacity = '1';
                                el.style.transform = 'translateY(0)';
                            }, i * 150);
                        });
                    }
                });
            }, { threshold: 0.3 });
            const kpiGrid = document.querySelector('.kpi-grid');
            if (kpiGrid) kpiObserver.observe(kpiGrid);
        });

        // Attractive Charts Script
        document.addEventListener('DOMContentLoaded', function() {
            const pieCtx = document.getElementById('attractive-pie-chart');
            if (pieCtx) {
                new Chart(pieCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Commercial', 'Residential', 'Industrial', 'Infrastructure', 'Institutional'],
                        datasets: [{
                            data: [35, 25, 20, 15, 5],
                            backgroundColor: ['rgba(67, 56, 202, 0.9)', 'rgba(124, 58, 237, 0.9)', 'rgba(168, 85, 247, 0.9)', 'rgba(244, 63, 94, 0.9)', 'rgba(6, 182, 212, 0.9)'],
                            borderColor: ['#ffffff', '#ffffff', '#ffffff', '#ffffff', '#ffffff'],
                            borderWidth: 3, hoverOffset: 20
                        }]
                    },
                    options: {
                        responsive: true, maintainAspectRatio: false, cutout: '60%',
                        plugins: {
                            legend: { display: true, position: 'bottom', labels: { padding: 20, usePointStyle: true, color: '#64748b', font: { size: 13, weight: '500' }}},
                            tooltip: {
                                backgroundColor: '#ffffff', borderColor: '#e2e8f0', borderWidth: 1,
                                padding: 15, titleFont: { size: 14, weight: 'bold' }, bodyFont: { size: 13 },
                                titleColor: '#0f172a', bodyColor: '#64748b',
                                cornerRadius: 10, displayColors: true,
                                callbacks: { label: function(context) { return context.label + ': ' + context.parsed + '%'; } }
                            }
                        },
                        animation: { animateRotate: true, animateScale: true, duration: 2000, easing: 'easeInOutQuart' }
                    }
                });
            }
            const barCtx = document.getElementById('attractive-bar-chart');
            if (barCtx) {
                const gradient1 = barCtx.getContext('2d').createLinearGradient(0, 0, 0, 400);
                gradient1.addColorStop(0, 'rgba(67, 56, 202, 0.9)'); gradient1.addColorStop(1, 'rgba(67, 56, 202, 0.3)');
                const gradient2 = barCtx.getContext('2d').createLinearGradient(0, 0, 0, 400);
                gradient2.addColorStop(0, 'rgba(168, 85, 247, 0.9)'); gradient2.addColorStop(1, 'rgba(168, 85, 247, 0.3)');
                new Chart(barCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Q1', 'Q2', 'Q3', 'Q4'],
                        datasets: [{
                            label: 'Revenue ($M)', data: [1.8, 2.3, 2.9, 3.5], backgroundColor: gradient1,
                            borderColor: 'rgba(67, 56, 202, 1)', borderWidth: 2, borderRadius: 10, borderSkipped: false
                        }, {
                            label: 'Projects', data: [245, 312, 389, 425], backgroundColor: gradient2,
                            borderColor: 'rgba(168, 85, 247, 1)', borderWidth: 2, borderRadius: 10, borderSkipped: false
                        }]
                    },
                    options: {
                        responsive: true, maintainAspectRatio: false,
                        plugins: {
                            legend: { display: true, position: 'top', labels: { padding: 20, usePointStyle: true, color: '#64748b', font: { size: 13, weight: '500' }}},
                            tooltip: {
                                backgroundColor: '#ffffff', borderColor: '#e2e8f0', borderWidth: 1,
                                padding: 15, titleFont: { size: 14, weight: 'bold' }, bodyFont: { size: 13 },
                                titleColor: '#0f172a', bodyColor: '#64748b',
                                cornerRadius: 10, displayColors: true,
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) { label += ': '; }
                                        if (context.dataset.label === 'Revenue ($M)') { label += '$' + context.parsed.y + 'M'; }
                                        else { label += context.parsed.y; }
                                        return label;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: { beginAtZero: true, grid: { borderDash: [5, 5], color: 'rgba(0, 0, 0, 0.06)', drawBorder: false }, ticks: { color: '#94a3b8' }},
                            x: { grid: { display: false, drawBorder: false }, ticks: { color: '#94a3b8' }}
                        },
                        animation: {
                            duration: 2000, easing: 'easeInOutQuart',
                            delay: (context) => context.dataIndex * 100 + context.datasetIndex * 100
                        }
                    }
                });
            }
        });
    </script>
    <script>
        // Mobile hamburger menu toggle (landing page)
        (function() {
            const btn = document.getElementById('mobileMenuBtn');
            const nav = document.getElementById('main-nav-menu');
            if (!btn || !nav) return;
            btn.addEventListener('click', function(e) {
                e.stopPropagation();
                btn.classList.toggle('active');
                nav.classList.toggle('mobile-open');
            });
            nav.querySelectorAll('.nav-link').forEach(function(link) {
                link.addEventListener('click', function() {
                    btn.classList.remove('active');
                    nav.classList.remove('mobile-open');
                });
            });
            document.addEventListener('click', function(e) {
                if (!nav.contains(e.target) && !btn.contains(e.target)) {
                    btn.classList.remove('active');
                    nav.classList.remove('mobile-open');
                }
            });
        })();

        // Portal sidebar slide-out toggle (logged-in mobile view)
        (function() {
            var portalBtn = document.getElementById('portalMenuBtn');
            var sidebar = document.getElementById('portalSidebar');
            var overlay = document.getElementById('sidebarOverlay');
            var closeBtn = document.getElementById('sidebarCloseBtn');

            function openSidebar() {
                if (!sidebar || !overlay) return;
                sidebar.classList.add('sidebar-open');
                overlay.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
            function closeSidebar() {
                if (!sidebar || !overlay) return;
                sidebar.classList.remove('sidebar-open');
                overlay.classList.remove('active');
                document.body.style.overflow = '';
            }

            if (portalBtn) {
                portalBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    if (sidebar && sidebar.classList.contains('sidebar-open')) {
                        closeSidebar();
                    } else {
                        openSidebar();
                    }
                });
            }
            if (closeBtn) {
                closeBtn.addEventListener('click', function() { closeSidebar(); });
            }
            if (overlay) {
                overlay.addEventListener('click', function() { closeSidebar(); });
            }

            // Close sidebar when a nav link is clicked (mobile UX)
            if (sidebar) {
                sidebar.addEventListener('click', function(e) {
                    var link = e.target.closest('.sidebar-nav-link');
                    if (link && window.innerWidth <= 768) {
                        closeSidebar();
                    }
                });
            }
        })();

        // ===== DEMO VIDEO SHOWCASE — 3-STATE ENGINE =====
        (function() {
            var SLIDE_INTERVAL = 2000;
            var GATE_AFTER = 3;          // show gate after 3 slide transitions (~6s)
            var TOTAL_SLIDES = 8;
            var currentSlide = 0;
            var slideTimer = null;
            var progressTimer = null;
            var slideTransitions = 0;
            var startTime = 0;
            var totalDuration = TOTAL_SLIDES * SLIDE_INTERVAL;
            var demoUnlocked = localStorage.getItem('sc_video_unlocked') === 'true';

            // State refs
            var statePlay   = document.getElementById('demoStatePlay');
            var stateSlides = document.getElementById('demoStateSlides');
            var stateGate   = document.getElementById('demoStateGate');

            // Caption data for each slide
            var captions = [
                { icon: 'fa-tachometer-alt', tag: 'Smart Dashboard', text: 'Personalized dashboard \u2014 real-time activity, notifications & quick actions' },
                { icon: 'fa-brain', tag: 'AI Estimation', text: 'Upload PDF drawings \u2014 AI generates cost estimates, BOQ & timelines instantly' },
                { icon: 'fa-file-pdf', tag: 'PDF Analysis', text: 'AI reads your drawings \u2014 extracts dimensions, quantities & material lists' },
                { icon: 'fa-briefcase', tag: 'Project Marketplace', text: 'Post projects, receive competitive quotes & hire verified steel designers' },
                { icon: 'fa-comments', tag: 'Real-Time Messaging', text: 'Chat with designers & contractors \u2014 file sharing & instant delivery' },
                { icon: 'fa-users', tag: 'Community Hub', text: 'Professional network \u2014 share updates, showcase work & connect with experts' },
                { icon: 'fa-chart-bar', tag: 'Analytics & Reports', text: 'Business analytics dashboards \u2014 track projects, revenue & performance' },
                { icon: 'fa-tasks', tag: 'Project Tracking', text: 'Monitor milestones, timelines & progress \u2014 real-time team collaboration' }
            ];

            // ======== WEB AUDIO API MUSIC ENGINE ========
            var audioCtx = null;
            var musicGain = null;
            var musicPlaying = false;
            var musicMuted = false;
            var beatInterval = null;

            function initMusic() {
                if (audioCtx) return;
                try {
                    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                    musicGain = audioCtx.createGain();
                    musicGain.gain.value = 0.25;
                    musicGain.connect(audioCtx.destination);
                } catch(e) { audioCtx = null; }
            }

            function playNote(freq, startT, dur, type, vol) {
                if (!audioCtx || !musicGain) return;
                var osc = audioCtx.createOscillator();
                var g = audioCtx.createGain();
                osc.type = type || 'sine';
                osc.frequency.value = freq;
                g.gain.setValueAtTime(vol || 0.3, startT);
                g.gain.exponentialRampToValueAtTime(0.001, startT + dur);
                osc.connect(g);
                g.connect(musicGain);
                osc.start(startT);
                osc.stop(startT + dur);
            }

            function playNoise(startT, dur, vol) {
                if (!audioCtx || !musicGain) return;
                var bufSize = audioCtx.sampleRate * dur;
                var buf = audioCtx.createBuffer(1, bufSize, audioCtx.sampleRate);
                var data = buf.getChannelData(0);
                for (var i = 0; i < bufSize; i++) data[i] = Math.random() * 2 - 1;
                var src = audioCtx.createBufferSource();
                src.buffer = buf;
                var hp = audioCtx.createBiquadFilter();
                hp.type = 'highpass';
                hp.frequency.value = 8000;
                var g = audioCtx.createGain();
                g.gain.setValueAtTime(vol || 0.08, startT);
                g.gain.exponentialRampToValueAtTime(0.001, startT + dur);
                src.connect(hp);
                hp.connect(g);
                g.connect(musicGain);
                src.start(startT);
            }

            function scheduleBeat() {
                if (!audioCtx) return;
                var bpm = 120;
                var beat = 60 / bpm;
                var now = audioCtx.currentTime + 0.05;
                // 2-bar loop (8 beats)
                for (var i = 0; i < 8; i++) {
                    var t = now + i * beat;
                    // Kick on 1 and 5
                    if (i === 0 || i === 4) {
                        playNote(55, t, 0.3, 'sine', 0.5);
                        playNote(110, t, 0.08, 'sine', 0.3);
                    }
                    // Snare on 3 and 7
                    if (i === 2 || i === 6) {
                        playNoise(t, 0.12, 0.1);
                        playNote(180, t, 0.08, 'triangle', 0.15);
                    }
                    // Hi-hat every beat
                    playNoise(t, 0.04, 0.05);
                    // Off-beat hi-hat
                    playNoise(t + beat * 0.5, 0.03, 0.03);
                    // Bass line
                    if (i === 0) playNote(82.4, t, beat * 2, 'sawtooth', 0.08);
                    if (i === 2) playNote(73.4, t, beat * 1.5, 'sawtooth', 0.06);
                    if (i === 4) playNote(98, t, beat * 2, 'sawtooth', 0.08);
                    if (i === 6) playNote(110, t, beat * 1.5, 'sawtooth', 0.06);
                }
                // Pad chord (ambient)
                playNote(261.6, now, beat * 8, 'sine', 0.04);
                playNote(329.6, now, beat * 8, 'sine', 0.03);
                playNote(392, now, beat * 8, 'sine', 0.03);
            }

            function startMusic() {
                initMusic();
                if (!audioCtx) return;
                if (audioCtx.state === 'suspended') audioCtx.resume();
                musicPlaying = true;
                scheduleBeat();
                beatInterval = setInterval(function() {
                    if (musicPlaying && !musicMuted) scheduleBeat();
                }, (60 / 120) * 8 * 1000); // schedule every 8 beats
            }

            function stopMusic() {
                musicPlaying = false;
                if (beatInterval) { clearInterval(beatInterval); beatInterval = null; }
            }

            // ======== HELPERS ========
            function getSlides() {
                return document.querySelectorAll('#demoSlides .demo-slide');
            }

            function updateCaption(idx) {
                var c = captions[idx];
                if (!c) return;
                var tag = document.getElementById('demoCaptionTag');
                var txt = document.getElementById('demoCaptionText');
                var num = document.getElementById('demoCaptionNum');
                var bar = document.getElementById('demoCaptionBar');
                if (tag) tag.innerHTML = '<i class="fas ' + c.icon + '"></i> ' + c.tag;
                if (txt) txt.textContent = c.text;
                if (num) num.textContent = (idx + 1) + ' / ' + TOTAL_SLIDES;
                // Retrigger animation
                if (bar) {
                    bar.classList.remove('demo-caption-animate');
                    void bar.offsetWidth;
                    bar.classList.add('demo-caption-animate');
                }
            }

            function goToSlide(idx) {
                var slides = getSlides();
                slides.forEach(function(s, i) {
                    if (i === idx) {
                        s.classList.add('demo-slide-active');
                    } else {
                        s.classList.remove('demo-slide-active');
                    }
                });
                currentSlide = idx;
                updateCaption(idx);
            }

            function animateCounters() {
                var targets = { demoCountProjects: 248, demoCountDesigners: 520, demoCountEstimates: 10400 };
                Object.keys(targets).forEach(function(id) {
                    var el = document.getElementById(id);
                    if (!el) return;
                    var target = targets[id];
                    var current = 0;
                    var step = Math.ceil(target / 30);
                    var timer = setInterval(function() {
                        current += step;
                        if (current >= target) { current = target; clearInterval(timer); }
                        el.textContent = current.toLocaleString() + '+';
                    }, 50);
                });
            }

            function stopTimers() {
                if (slideTimer) { clearInterval(slideTimer); slideTimer = null; }
                if (progressTimer) { clearInterval(progressTimer); progressTimer = null; }
            }

            function startProgress() {
                startTime = Date.now() - (currentSlide * SLIDE_INTERVAL);
                progressTimer = setInterval(function() {
                    var elapsed = Date.now() - startTime;
                    var pct = Math.min((elapsed / totalDuration) * 100, 100);
                    var fill = document.getElementById('demoProgressFill');
                    if (fill) fill.style.width = pct + '%';
                }, 50);
            }

            function resetToStart() {
                stopTimers();
                stopMusic();
                var fill = document.getElementById('demoProgressFill');
                if (fill) fill.style.width = '0%';
                goToSlide(0);
                slideTransitions = 0;
                if (stateSlides) stateSlides.style.display = 'none';
                if (stateGate) stateGate.style.display = 'none';
                if (statePlay) statePlay.style.display = 'flex';
            }

            function startSlideshow() {
                stopTimers();
                startProgress();
                slideTimer = setInterval(function() {
                    var nextSlide = currentSlide + 1;
                    slideTransitions++;

                    // Gate check
                    if (!demoUnlocked && slideTransitions >= GATE_AFTER) {
                        stopTimers();
                        stopMusic();
                        // STATE 2 -> STATE 3
                        if (stateSlides) stateSlides.style.display = 'none';
                        if (stateGate) stateGate.style.display = 'flex';
                        setTimeout(function() {
                            var input = document.getElementById('demoGateEmail');
                            if (input) input.focus();
                        }, 300);
                        return;
                    }

                    if (nextSlide >= TOTAL_SLIDES) {
                        if (demoUnlocked) {
                            goToSlide(0);
                            currentSlide = 0;
                        } else {
                            resetToStart();
                        }
                        return;
                    }
                    goToSlide(nextSlide);
                }, SLIDE_INTERVAL);
            }

            // ---- demoPlay: STATE 1 -> STATE 2 ----
            window.demoPlay = function() {
                if (!statePlay || !stateSlides) return;
                statePlay.style.display = 'none';
                stateSlides.style.display = 'flex';

                currentSlide = 0;
                slideTransitions = 0;
                goToSlide(0);
                animateCounters();
                startSlideshow();
                startMusic();
            };

            // ---- demoUnlock: STATE 3 -> STATE 2, resume ----
            window.demoUnlock = async function(e) {
                e.preventDefault();
                var email = document.getElementById('demoGateEmail');
                if (!email || !email.value.trim()) return false;

                var btn = document.getElementById('demoGateBtn');
                var btnText = btn ? btn.querySelector('.demo-gate-btn-text') : null;
                var btnLoad = btn ? btn.querySelector('.demo-gate-btn-loading') : null;
                if (btnText) btnText.style.display = 'none';
                if (btnLoad) btnLoad.style.display = 'inline-flex';
                if (btn) btn.disabled = true;

                try {
                    var backendUrl = (typeof BACKEND_URL !== 'undefined') ? BACKEND_URL : 'https://steelconnect-backend.onrender.com/api';
                    await fetch(backendUrl + '/prospects/capture', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email: email.value.trim(), source: 'video-gate', scrollDepth: 0 })
                    });
                } catch (err) { /* silent */ }

                localStorage.setItem('sc_video_unlocked', 'true');
                localStorage.setItem('sc_prospect_captured', 'true');
                localStorage.setItem('sc_popup_dismissed', 'true');
                localStorage.setItem('sc_bar_dismissed', 'true');
                demoUnlocked = true;

                var contentGate = document.getElementById('contentGate');
                var gatedContent = document.getElementById('gatedContent');
                if (contentGate) contentGate.style.display = 'none';
                if (gatedContent) gatedContent.style.display = '';
                var bar = document.getElementById('prospectBar');
                if (bar) bar.style.display = 'none';
                var pPopup = document.getElementById('prospectPopup');
                if (pPopup) pPopup.style.display = 'none';

                // STATE 3 -> STATE 2, resume slideshow + music
                if (stateGate) stateGate.style.display = 'none';
                if (stateSlides) stateSlides.style.display = 'flex';
                startSlideshow();
                startMusic();

                return false;
            };

            // ---- Music mute toggle ----
            window.demoToggleMute = function() {
                var btn = document.getElementById('demoMuteBtn');
                if (!btn) return;
                musicMuted = !musicMuted;
                if (musicGain) musicGain.gain.value = musicMuted ? 0 : 0.25;
                btn.innerHTML = musicMuted ? '<i class="fas fa-volume-mute"></i>' : '<i class="fas fa-volume-up"></i>';
            };

            // ---- Fullscreen toggle ----
            window.demoToggleFS = function() {
                var player = document.getElementById('demoPlayer');
                if (!player) return;
                if (document.fullscreenElement) {
                    document.exitFullscreen();
                } else {
                    player.requestFullscreen().catch(function(){});
                }
            };

            // ---- If already unlocked, skip gate entirely ----
            // (demoPlay will run slideshow without hitting the gate check)

            // ---- IntersectionObserver: attention pulse on play button ----
            var obs = new IntersectionObserver(function(entries) {
                entries.forEach(function(entry) {
                    if (entry.isIntersecting) {
                        var circle = document.getElementById('demoPlayCircle');
                        if (circle) circle.classList.add('demo-attention');
                        obs.disconnect();
                    }
                });
            }, { threshold: 0.3 });
            var sec = document.getElementById('videoShowcase');
            if (sec) obs.observe(sec);
        })();

        // Content gate: unlock gated content
        window.unlockContent = async function(e) {
            e.preventDefault();
            var form = e.target;
            var input = form.querySelector('input[type="email"]');
            var email = input.value.trim();
            if (!email) return false;

            var btn = form.querySelector('button[type="submit"]');
            var btnText = btn.querySelector('.cg-btn-text');
            var btnLoad = btn.querySelector('.cg-btn-loading');
            if (btnText) btnText.style.display = 'none';
            if (btnLoad) btnLoad.style.display = 'inline';
            btn.disabled = true;

            var scrollPct = 0;
            var docH = document.documentElement.scrollHeight - window.innerHeight;
            if (docH > 0) scrollPct = Math.round((window.scrollY / docH) * 100);

            try {
                var backendUrl = (typeof BACKEND_URL !== 'undefined') ? BACKEND_URL : 'https://steelconnect-backend.onrender.com/api';
                await fetch(backendUrl + '/prospects/capture', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email: email, source: 'content-gate', scrollDepth: scrollPct })
                });
            } catch (err) { /* silent */ }

            localStorage.setItem('sc_prospect_captured', 'true');
            localStorage.setItem('sc_popup_dismissed', 'true');
            localStorage.setItem('sc_bar_dismissed', 'true');

            // Unlock content with smooth animation
            var gate = document.getElementById('contentGate');
            var gated = document.getElementById('gatedContent');
            if (gate) { gate.style.opacity = '0'; gate.style.transform = 'translateY(-20px)'; setTimeout(function(){ gate.style.display = 'none'; }, 300); }
            if (gated) gated.style.display = '';

            // Hide other prospect captures
            var bar = document.getElementById('prospectBar');
            if (bar) bar.style.display = 'none';
            var popup = document.getElementById('prospectPopup');
            if (popup) popup.style.display = 'none';

            return false;
        };

        // Auto-unlock if already captured
        if (localStorage.getItem('sc_prospect_captured')) {
            var gate = document.getElementById('contentGate');
            var gated = document.getElementById('gatedContent');
            if (gate) gate.style.display = 'none';
            if (gated) gated.style.display = '';
        }

        // Mini estimator logic
        window.runMiniEstimate = function() {
            var type = document.getElementById('lcProjectType').value;
            var area = parseFloat(document.getElementById('lcArea').value);
            var unit = document.getElementById('lcUnit').value;
            var region = document.getElementById('lcRegion').value;

            if (!type) { alert('Please select a project type.'); return; }
            if (!area || area < 100) { alert('Please enter an area (minimum 100).'); return; }
            if (!region) { alert('Please select your region.'); return; }

            // Convert to sqft for calculation
            var areaSqft = unit === 'sqm' ? area * 10.764 : area;

            // Regional cost benchmarks per sqft (low-high)
            var benchmarks = {
                'Industrial / Warehouse': { USD: [80,200], INR: [2000,5000], AED: [300,700] },
                'Commercial Office': { USD: [150,350], INR: [3000,8000], AED: [500,1200] },
                'Residential': { USD: [120,280], INR: [1500,4500], AED: [400,900] },
                'Retail / Shopping': { USD: [130,300], INR: [2500,7000], AED: [450,1000] },
                'Pre-Engineered Building': { USD: [40,120], INR: [1200,3000], AED: [180,450] },
                'Healthcare': { USD: [250,500], INR: [5000,12000], AED: [700,1500] },
                'Educational': { USD: [180,350], INR: [3500,8000], AED: [500,1000] },
                'Mixed-Use': { USD: [160,380], INR: [3000,8500], AED: [500,1100] }
            };

            var currMap = { India: 'INR', USA: 'USD', UAE: 'AED', UK: 'USD', 'Southeast Asia': 'USD', Africa: 'USD', Other: 'USD' };
            var symMap = { INR: '\u20B9', USD: '$', AED: 'AED ' };
            var curr = currMap[region] || 'USD';
            var sym = symMap[curr];
            var bm = benchmarks[type] ? (benchmarks[type][curr] || benchmarks[type].USD) : [100, 300];

            var low = Math.round(bm[0] * areaSqft);
            var high = Math.round(bm[1] * areaSqft);

            // Show step 2
            document.getElementById('lcStep1').style.display = 'none';
            document.getElementById('lcStep2').style.display = '';
            document.getElementById('lcPreviewType').textContent = type + ' (' + area.toLocaleString() + ' ' + (unit === 'sqm' ? 'sq m' : 'sq ft') + ')';
            document.getElementById('lcPreviewRange').textContent = sym + low.toLocaleString() + ' - ' + sym + high.toLocaleString();
            document.getElementById('lcPreviewRate').textContent = sym + bm[0].toLocaleString() + ' - ' + sym + bm[1].toLocaleString() + ' / sq ft';

            // Store for backend
            window._lcEstimateData = { projectType: type, area: area, unit: unit, region: region, currency: curr };
        };

        // Prospect email capture & popup
        (function() {
            var PROSPECT_KEY = 'sc_prospect_captured';
            var POPUP_KEY = 'sc_popup_dismissed';

            // Capture email function (global)
            window.captureProspectEmail = async function(e, isPopup, customSource) {
                e.preventDefault();
                var form = e.target;
                var input = form.querySelector('input[type="email"]');
                var email = input.value.trim();
                if (!email) return false;

                var btn = form.querySelector('button[type="submit"]');
                var btnText = btn.querySelector('.prospect-btn-text') || btn;
                var btnLoad = btn.querySelector('.prospect-btn-loading');
                if (btnText.style) btnText.style.display = 'none';
                if (btnLoad) btnLoad.style.display = 'inline';
                btn.disabled = true;

                // Collect scroll depth at capture time
                var scrollPct = 0;
                var docH = document.documentElement.scrollHeight - window.innerHeight;
                if (docH > 0) scrollPct = Math.round((window.scrollY / docH) * 100);

                var source = customSource || (isPopup ? 'popup' : 'inline-form');

                // Include mini estimator data if available
                var bodyData = { email: email, source: source, scrollDepth: scrollPct };
                if (window._lcEstimateData) {
                    bodyData.estimateData = window._lcEstimateData;
                }

                try {
                    var backendUrl = (typeof BACKEND_URL !== 'undefined') ? BACKEND_URL : 'https://steelconnect-backend.onrender.com/api';
                    var resp = await fetch(backendUrl + '/prospects/capture', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(bodyData)
                    });
                    var data = await resp.json();

                    localStorage.setItem(PROSPECT_KEY, 'true');

                    // Hide all prospect UI after capture
                    var bar = document.getElementById('prospectBar');
                    if (bar) bar.style.display = 'none';

                    if (isPopup) {
                        var popup = document.getElementById('prospectPopup');
                        if (popup) popup.style.display = 'none';
                        localStorage.setItem(POPUP_KEY, 'true');
                    }

                    // Show mini estimator success state
                    var lcStep2 = document.getElementById('lcStep2');
                    var lcStep3 = document.getElementById('lcStep3');
                    if (lcStep2 && lcStep3 && source === 'mini-estimator') {
                        lcStep2.style.display = 'none';
                        lcStep3.style.display = '';
                    }

                    if (isPopup) {
                        if (typeof showNotification === 'function') {
                            showNotification('Thank you! We will be in touch soon.', 'success');
                        }
                    }
                } catch (err) {
                    console.error('Prospect capture error:', err);
                    if (typeof showNotification === 'function') {
                        showNotification('Something went wrong. Please try again.', 'error');
                    }
                }

                if (btnText.style) btnText.style.display = '';
                if (btnLoad) btnLoad.style.display = 'none';
                btn.disabled = false;
                return false;
            };

            // Popup logic: show on scroll (50% of page) or exit intent for first-time visitors
            if (!localStorage.getItem(POPUP_KEY) && !localStorage.getItem(PROSPECT_KEY)) {
                var popupShown = false;
                function showProspectPopup() {
                    if (popupShown) return;
                    var popup = document.getElementById('prospectPopup');
                    var landing = document.getElementById('landing-page-content');
                    if (popup && landing && landing.style.display !== 'none') {
                        popup.style.display = 'flex';
                        popupShown = true;
                    }
                }
                // Trigger on scroll past 50% of landing page
                window.addEventListener('scroll', function() {
                    if (popupShown) return;
                    var docH = document.documentElement.scrollHeight - window.innerHeight;
                    if (docH > 0 && (window.scrollY / docH) >= 0.5) {
                        showProspectPopup();
                    }
                });
                // Exit intent: mouse leaves viewport top (desktop only)
                document.addEventListener('mouseout', function(e) {
                    if (popupShown) return;
                    if (e.clientY <= 0 && e.relatedTarget == null) {
                        showProspectPopup();
                    }
                });
                // Fallback: 60s timer in case they don't scroll much
                setTimeout(function() { showProspectPopup(); }, 60000);
            }

            // Close popup
            var closeBtn = document.getElementById('prospectPopupClose');
            if (closeBtn) {
                closeBtn.addEventListener('click', function() {
                    document.getElementById('prospectPopup').style.display = 'none';
                    localStorage.setItem(POPUP_KEY, 'true');
                });
            }

            // Close popup on overlay click
            var popupOverlay = document.getElementById('prospectPopup');
            if (popupOverlay) {
                popupOverlay.addEventListener('click', function(e) {
                    if (e.target === popupOverlay) {
                        popupOverlay.style.display = 'none';
                        localStorage.setItem(POPUP_KEY, 'true');
                    }
                });
            }

            // Sticky bottom bar: show after scrolling past hero section (20% of page)
            var BAR_KEY = 'sc_bar_dismissed';
            if (!localStorage.getItem(BAR_KEY) && !localStorage.getItem(PROSPECT_KEY)) {
                var barShown = false;
                window.addEventListener('scroll', function() {
                    if (barShown || localStorage.getItem(PROSPECT_KEY)) return;
                    var docH = document.documentElement.scrollHeight - window.innerHeight;
                    var landing = document.getElementById('landing-page-content');
                    if (docH > 0 && (window.scrollY / docH) >= 0.2 && landing && landing.style.display !== 'none') {
                        var bar = document.getElementById('prospectBar');
                        if (bar) { bar.style.display = 'flex'; barShown = true; }
                    }
                });
            }

            // Close sticky bar
            var barClose = document.getElementById('prospectBarClose');
            if (barClose) {
                barClose.addEventListener('click', function() {
                    document.getElementById('prospectBar').style.display = 'none';
                    localStorage.setItem(BAR_KEY, 'true');
                });
            }
        })();
    </script>

    <!-- ========== STEELCONNECT AI CHATBOT WIDGET ========== -->
    <div id="sc-chatbot-widget" class="sc-chatbot-widget">
        <!-- Floating Toggle Button -->
        <button class="sc-chatbot-toggle" id="scChatbotToggle" aria-label="Open AI Assistant">
            <div class="sc-chatbot-toggle-inner">
                <div class="sc-chatbot-toggle-pulse"></div>
                <div class="sc-chatbot-toggle-pulse sc-pulse-2"></div>
                <div class="sc-chatbot-toggle-icon" id="scChatbotToggleIcon">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2C6.48 2 2 6.04 2 11c0 2.77 1.56 5.22 4 6.82V22l3.77-2.08c.74.13 1.47.08 2.23.08 5.52 0 10-4.04 10-9S17.52 2 12 2z" fill="white"/>
                        <circle cx="8" cy="11" r="1.2" fill="#4338ca"/>
                        <circle cx="12" cy="11" r="1.2" fill="#4338ca"/>
                        <circle cx="16" cy="11" r="1.2" fill="#4338ca"/>
                    </svg>
                </div>
                <div class="sc-chatbot-toggle-close" id="scChatbotToggleClose" style="display:none;">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 6L6 18M6 6l12 12" stroke="white" stroke-width="2.5" stroke-linecap="round"/>
                    </svg>
                </div>
            </div>
            <span class="sc-chatbot-badge" id="scChatbotBadge">1</span>
        </button>

        <!-- Chat Window -->
        <div class="sc-chatbot-window" id="scChatbotWindow" style="display:none;">
            <!-- Header -->
            <div class="sc-chatbot-header">
                <div class="sc-chatbot-header-left">
                    <div class="sc-chatbot-avatar">
                        <div class="sc-chatbot-avatar-ring"></div>
                        <div class="sc-chatbot-avatar-inner">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M12 2L2 7v10l10 5 10-5V7L12 2z" fill="url(#botGrad)" opacity="0.15"/>
                                <path d="M9 10h.01M15 10h.01M9.5 15a3.5 3.5 0 005 0" stroke="url(#botGrad)" stroke-width="2" stroke-linecap="round"/>
                                <defs><linearGradient id="botGrad" x1="2" y1="2" x2="22" y2="22"><stop stop-color="#6366f1"/><stop offset="1" stop-color="#8b5cf6"/></linearGradient></defs>
                            </svg>
                        </div>
                    </div>
                    <div class="sc-chatbot-header-info">
                        <h4>SteelConnect AI</h4>
                        <span class="sc-chatbot-status"><span class="sc-chatbot-status-dot"></span> Online</span>
                    </div>
                </div>
                <div class="sc-chatbot-header-actions">
                    <button class="sc-chatbot-minimize" id="scChatbotMinimize" aria-label="Minimize">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                    </button>
                </div>
            </div>

            <!-- Messages Area -->
            <div class="sc-chatbot-messages" id="scChatbotMessages">
                <!-- Welcome message injected by JS -->
            </div>

            <!-- Quick Actions (shown initially) -->
            <div class="sc-chatbot-quick-actions" id="scChatbotQuickActions">
                <button class="sc-chatbot-quick-btn" data-question="What is SteelConnect?">
                    <i class="fas fa-info-circle"></i> What is SteelConnect?
                </button>
                <button class="sc-chatbot-quick-btn" data-question="How does AI Estimation work?">
                    <i class="fas fa-brain"></i> AI Estimation
                </button>
                <button class="sc-chatbot-quick-btn" data-question="What are the pricing plans?">
                    <i class="fas fa-tags"></i> Pricing & Plans
                </button>
                <button class="sc-chatbot-quick-btn" data-question="How do I get started as a contractor?">
                    <i class="fas fa-hard-hat"></i> Getting Started
                </button>
            </div>

            <!-- Email Capture (shown after 2 messages) -->
            <div class="sc-chatbot-email-capture" id="scChatbotEmailCapture" style="display:none;">
                <div class="sc-chatbot-email-inner">
                    <div class="sc-chatbot-email-sparkle"><i class="fas fa-envelope-open-text"></i></div>
                    <p class="sc-chatbot-email-text">Get a personalized demo & free AI estimate sent to your inbox</p>
                    <form class="sc-chatbot-email-form" id="scChatbotEmailForm">
                        <input type="email" class="sc-chatbot-email-input" id="scChatbotEmailInput" placeholder="your@email.com" required>
                        <button type="submit" class="sc-chatbot-email-btn">
                            <span class="sc-chatbot-email-btn-text"><i class="fas fa-paper-plane"></i></span>
                            <span class="sc-chatbot-email-btn-loading" style="display:none;"><i class="fas fa-spinner fa-spin"></i></span>
                        </button>
                    </form>
                    <button class="sc-chatbot-email-skip" id="scChatbotEmailSkip">Maybe later</button>
                </div>
            </div>

            <!-- Input Area -->
            <div class="sc-chatbot-input-area">
                <div class="sc-chatbot-input-container">
                    <textarea class="sc-chatbot-input" id="scChatbotInput" placeholder="Ask me anything about SteelConnect..." rows="1" maxlength="500"></textarea>
                    <button class="sc-chatbot-send" id="scChatbotSend" disabled aria-label="Send message">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
                <div class="sc-chatbot-powered">
                    <span>Powered by SteelConnect AI</span>
                </div>
            </div>
        </div>
    </div>
    <!-- ========== END CHATBOT WIDGET ========== -->

    <!-- ========== VISITOR TRACKING ========== -->
    <script>
    (function() {
        var TRACK_URL = (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1')
            ? 'http://localhost:10000/api' : 'https://steelconnect-backend.onrender.com/api';
        var SESSION_KEY = 'sc_visitor_sid';
        var sessionId = sessionStorage.getItem(SESSION_KEY);
        if (!sessionId) {
            sessionId = 'v_' + Date.now() + '_' + Math.random().toString(36).substring(2, 10);
            sessionStorage.setItem(SESSION_KEY, sessionId);
        }

        var startTime = Date.now();
        var currentPage = window.location.pathname + window.location.hash;
        var tracked = sessionStorage.getItem('sc_visitor_tracked');

        function getElapsedSeconds() {
            return Math.round((Date.now() - startTime) / 1000);
        }

        // Get logged-in user info if available
        function getUserInfo() {
            try {
                var u = localStorage.getItem('currentUser');
                if (u) {
                    var user = JSON.parse(u);
                    return { userEmail: user.email || '', userName: user.name || '' };
                }
            } catch(e) {}
            return {};
        }

        function sendBeacon(url, data) {
            try {
                var blob = new Blob([JSON.stringify(data)], { type: 'application/json' });
                if (navigator.sendBeacon) {
                    navigator.sendBeacon(TRACK_URL + url, blob);
                } else {
                    var xhr = new XMLHttpRequest();
                    xhr.open('POST', TRACK_URL + url, true);
                    xhr.setRequestHeader('Content-Type', 'application/json');
                    xhr.send(JSON.stringify(data));
                }
            } catch(e) {}
        }

        // Initial track (only once per session)
        if (!tracked) {
            try {
                var userInfo = getUserInfo();
                var trackData = {
                    sessionId: sessionId,
                    referrer: document.referrer || 'Direct',
                    landingPage: currentPage,
                    userAgent: navigator.userAgent,
                    screenResolution: screen.width + 'x' + screen.height,
                    language: navigator.language || ''
                };
                if (userInfo.userEmail) trackData.userEmail = userInfo.userEmail;
                if (userInfo.userName) trackData.userName = userInfo.userName;

                var xhr = new XMLHttpRequest();
                xhr.open('POST', TRACK_URL + '/visitors/track', true);
                xhr.setRequestHeader('Content-Type', 'application/json');
                xhr.send(JSON.stringify(trackData));
                sessionStorage.setItem('sc_visitor_tracked', '1');
            } catch(e) {}
        }

        // Heartbeat every 30 seconds to track time + page changes + user login
        setInterval(function() {
            var nowPage = window.location.pathname + window.location.hash;
            var userInfo = getUserInfo();
            var data = {
                sessionId: sessionId,
                currentPage: nowPage,
                timeSpentSeconds: getElapsedSeconds()
            };
            // Send user info on every heartbeat so mid-session login is captured
            if (userInfo.userEmail) data.userEmail = userInfo.userEmail;
            if (userInfo.userName) data.userName = userInfo.userName;
            sendBeacon('/visitors/heartbeat', data);
            currentPage = nowPage;
        }, 30000);

        // Track page changes for SPA navigation
        var lastHash = window.location.hash;
        setInterval(function() {
            var newHash = window.location.hash;
            if (newHash !== lastHash) {
                lastHash = newHash;
                var userInfo = getUserInfo();
                var data = {
                    sessionId: sessionId,
                    currentPage: window.location.pathname + newHash,
                    timeSpentSeconds: getElapsedSeconds()
                };
                if (userInfo.userEmail) data.userEmail = userInfo.userEmail;
                if (userInfo.userName) data.userName = userInfo.userName;
                sendBeacon('/visitors/heartbeat', data);
            }
        }, 2000);

        // Send leave event when closing tab
        window.addEventListener('beforeunload', function() {
            sendBeacon('/visitors/leave', {
                sessionId: sessionId,
                timeSpentSeconds: getElapsedSeconds()
            });
        });

        // Also track visibility changes (tab switch = inactive)
        document.addEventListener('visibilitychange', function() {
            if (document.visibilityState === 'hidden') {
                sendBeacon('/visitors/leave', {
                    sessionId: sessionId,
                    timeSpentSeconds: getElapsedSeconds()
                });
            }
        });
    })();
    </script>

</body>
</html>
